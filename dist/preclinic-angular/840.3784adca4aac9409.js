"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[840],{10840:(I,b,c)=>{c.r(b),c.d(b,{SubsplantingModule:()=>M});var h=c(36895),g=c(30027),y=c(46382),f=c(30671),t=c(94650),v=c(42466),d=c(80529),p=c(75862),A=c(40866);let S=(()=>{const s=class{constructor(i,e){this.http=i,this.authSrv=e}getListClubs(i=1,e=""){let r=new d.WM({Authorization:"Bearer "+this.authSrv.token}),o="";return""!=e&&(o+="&club_name_search="+e),this.http.get(p.$g+"/clubs/get-all-clubs?page="+i+o,{headers:r})}susplant(i){let e=new d.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(p.$g+"/clubs/susplant-club/"+i,null,{headers:e})}unsusplant(i){let e=new d.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(p.$g+"/clubs/unsusplant-club/"+i,null,{headers:e})}};let n=s;return s.\u0275fac=function(e){return new(e||s)(t.LFG(d.eN),t.LFG(A.e))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),n})();var u=c(24006),T=c(96308);function C(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"td")(1,"div",42)(2,"div",43)(3,"p",44),t.NdJ("click",function(){t.CHM(a);const e=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.unsusplant(e.id))}),t._uU(4," SUSPLANTADO "),t.qZA()()()()}}function Z(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"td")(1,"div",42)(2,"div",43)(3,"p",45),t.NdJ("click",function(){t.CHM(a);const e=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.susplant(e.id))}),t._uU(4," SELECCIONAR "),t.qZA()()()()}}function P(n,s){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.YNc(3,C,5,0,"td",41),t.YNc(4,Z,5,0,"td",41),t.qZA()),2&n){const a=s.$implicit,i=t.oxw(2);t.xp6(2),t.hij("",a.name," "),t.xp6(1),t.Q6J("ngIf",a.id==i.genericCLub.club_id),t.xp6(1),t.Q6J("ngIf",a.id!=i.genericCLub.club_id)}}function L(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"li",47),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(3);return t.KtG(e.moveToPage(e.currentPage-2))}),t.TgZ(1,"a",48),t._uU(2," ... "),t.qZA()()}if(2&n){const a=t.oxw(3);t.Q6J("hidden",1===a.currentPage)}}function k(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"li",47),t.NdJ("click",function(){t.CHM(a);const e=t.oxw(3);return t.KtG(e.moveToPage(e.currentPage+2))}),t.TgZ(1,"a",48),t._uU(2," ... "),t.qZA()()}if(2&n){const a=t.oxw(3);t.Q6J("hidden",a.currentPage>=a.pageNumberArray[a.pageNumberArray.length-2]||a.totalData<a.serialNumberArray[a.serialNumberArray.length-1])}}function N(n,s){if(1&n){const a=t.EpF();t.ynx(0),t.TgZ(1,"li",38)(2,"a",40),t.NdJ("click",function(){const r=t.CHM(a).$implicit,l=t.oxw(2);return t.KtG(l.moveToPage(r))}),t._uU(3),t.qZA()(),t.YNc(4,L,3,1,"li",46),t.YNc(5,k,3,1,"li",46),t.BQk()}if(2&n){const a=s.$implicit,i=s.index,e=t.oxw(2);t.xp6(1),t.ekj("active",a===e.currentPage),t.Q6J("ngClass",e.pageNumberArray[e.currentPage-2]>a&&1!==a&&e.pageNumberArray.length>6||e.pageNumberArray[e.currentPage]<a&&1!==a&&e.pageNumberArray.length>6&&e.pageNumberArray.length!==a?"hide-page-no":"show-page-no"),t.xp6(2),t.hij(" ",a," "),t.xp6(1),t.Q6J("ngIf",0===i&&e.pageNumberArray.length>6&&e.currentPage>2),t.xp6(1),t.Q6J("ngIf",i===e.pageNumberArray.length-2&&e.pageNumberArray.length>6)}}const x=function(n){return{disabled:n}};function D(n,s){if(1&n){const a=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",11)(3,"div",12)(4,"div",13)(5,"div",14)(6,"div",15)(7,"div",16)(8,"h3"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",17)(12,"div",18)(13,"a",19),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.refresh())}),t._UZ(14,"img",20),t.qZA()()()()(),t._UZ(15,"div",21),t.qZA()(),t.TgZ(16,"div",22)(17,"form")(18,"div",3)(19,"div",23)(20,"div",24)(21,"label"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"input",25),t.NdJ("ngModelChange",function(e){t.CHM(a);const r=t.oxw();return t.KtG(r.searchDataPlayer=e)}),t.qZA()()(),t.TgZ(25,"div",23)(26,"div",26)(27,"button",27),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.filter())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()()(),t._UZ(30,"br"),t.TgZ(31,"div",28)(32,"table",29),t.NdJ("matSortChange",function(e){t.CHM(a);const r=t.oxw();return t.KtG(r.sortData(e))}),t.TgZ(33,"thead")(34,"tr")(35,"th",30),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th",30),t._uU(39),t.ALo(40,"translate"),t.qZA()()(),t.TgZ(41,"tbody"),t.YNc(42,P,5,3,"tr",31),t.qZA()(),t.TgZ(43,"div",32)(44,"div",33)(45,"div",34),t._uU(46),t.qZA()(),t.TgZ(47,"div",35)(48,"div",36)(49,"ul",37)(50,"li",38)(51,"a",39),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.getMoreData("previous"))}),t._uU(52,"Previous"),t.qZA()(),t.YNc(53,N,6,6,"ng-container",31),t.TgZ(54,"li",38)(55,"a",40),t.NdJ("click",function(){t.CHM(a);const e=t.oxw();return t.KtG(e.getMoreData("next"))}),t._uU(56,"Next "),t.qZA()()()()()()()()()()()}if(2&n){const a=t.oxw();t.xp6(9),t.Oqu(t.lcZ(10,13,"home_page.clubs")),t.xp6(13),t.hij("",t.lcZ(23,15,"home_page.phrase_21")," "),t.xp6(2),t.Q6J("ngModel",a.searchDataPlayer),t.xp6(4),t.Oqu(t.lcZ(29,17,"tournaments.search")),t.xp6(8),t.Oqu(t.lcZ(37,19,"tournaments.name")),t.xp6(3),t.Oqu(t.lcZ(40,21,"tournaments.status")),t.xp6(3),t.Q6J("ngForOf",a.clubsList),t.xp6(4),t.lnq(" Showing ",a.serialNumberArray[0]," to ",a.serialNumberArray[a.serialNumberArray.length-1]," of ",a.totalData," entries "),t.xp6(4),t.Q6J("ngClass",t.VKq(23,x,1===a.currentPage)),t.xp6(3),t.Q6J("ngForOf",a.pageNumberArray),t.xp6(1),t.Q6J("ngClass",t.VKq(25,x,a.currentPage===a.pageNumberArray[a.pageNumberArray.length-1]||0===a.clubsList.length))}}const J=[{path:"",component:(()=>{const s=class{constructor(i,e,r){this.activateRoute=i,this.translate=e,this.subsplantingSrv=r,this.routes=y._,this.tab_selected=1,this.id_league="",this.can_edit=!1,this.loaded=!1,this.translations=[],this.clubsList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=10,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.players_general=[],this.birthdayBeauty="",this.date="",this.searchDataPlayer="",this.court_value="",this.courts_list=[],this.date_start_tournament="",this.date_end_tournament="",this.category_id="",this.isLoaded=!0}ngOnInit(){this.initializeLanguage(),this.user=this.subsplantingSrv.authSrv.user,this.hasPermission(),this.activateRoute.params.subscribe(i=>{this.id_league=i.id,this.getTableData()})}initializeLanguage(){this.translate.use(this.subsplantingSrv.authSrv.language),this.translate.setDefaultLang(this.subsplantingSrv.authSrv.language),this.translate.get(["commun_translations","tournaments","club_translations","tournaments.tournaments_messages","tournaments.type_category"]).subscribe(i=>{this.translations=i})}hasPermission(i=""){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes(i))&&(this.can_edit=!0,!0)}tabSeleted(i){this.tab_selected=i}getTableDataGeneral(){let i=new h.uU("en-US");this.clubsList=[],this.serialNumberArray=[],this.clubsList.map((e,r)=>{const l=r+1;r>=this.skip&&l<=this.limit&&(this.clubsList.push(e),e.birthday=i.transform(e.birthday,"dd/MM/yyyy"),this.serialNumberArray.push(l))}),this.dataSource=new f.by(this.clubsList),this.calculateTotalPages(this.totalData,this.pageSize)}searchData(i){this.dataSource.filter=i.trim().toLowerCase(),this.clubsList=this.dataSource.filteredData,this.totalData=this.clubsList.length}sortData(i){const e=this.clubsList.slice();this.clubsList=i.active&&""!==i.direction?e.sort((r,l)=>(r[i.active]<l[i.active]?-1:1)*("asc"===i.direction?1:-1)):e}getMoreData(i){"next"==i?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral()):"previous"==i&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableDataGeneral())}moveToPage(i){this.currentPage=i,this.skip=this.pageSelection[i-1].skip,this.limit=this.pageSelection[i-1].limit,i>this.currentPage?this.pageIndex=i-1:i<this.currentPage&&(this.pageIndex=i+1),this.getTableData(this.currentPage)}refresh(){this.pageSelection=[],this.searchDataValue="",this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.searchDataPlayer="",this.court_value="",this.date="",this.category_id="",this.getTableData(),this.isLoaded=!1}calculateTotalPages(i,e){this.pageNumberArray=[],this.totalPages=i/e,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var r=1;r<=this.totalPages;r++){const l=e*r,o=l-e;this.pageNumberArray.push(r),this.pageSelection.push({skip:o,limit:l})}}filter(){this.searchDataPlayer=this.searchDataPlayer.trim().toLowerCase(),this.currentPage=1,this.getTableData(this.currentPage,this.searchDataPlayer,this.date,this.category_id)}getTableData(i=1,e="",r="",l=""){this.clubsList=[],this.serialNumberArray=[];let m,o=new h.uU("en-US");this.date&&(m=o.transform(this.date,"yyyy-MM-dd")),this.subsplantingSrv.getListClubs(i,e).subscribe(_=>{this.totalData=_.total,this.clubsList=_.clubs.data,this.genericCLub=_.generic_club,this.dataSource=new f.by(this.clubsList),this.calculateTotalPages(this.totalData,this.pageSize),this.isLoaded=!0})}unsusplant(i){this.subsplantingSrv.unsusplant(i).subscribe(e=>{"200"==e.message&&-1!=this.clubsList.findIndex(l=>l.id==i)&&(this.genericCLub=e.generic_club)})}susplant(i){this.subsplantingSrv.susplant(i).subscribe(e=>{"200"==e.message&&-1!=this.clubsList.findIndex(l=>l.id==i)&&(this.genericCLub=e.generic_club)})}};let n=s;return s.\u0275fac=function(e){return new(e||s)(t.Y36(g.gz),t.Y36(v.sK),t.Y36(S))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-subsplanting"]],decls:14,vars:2,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],["class","row",4,"ngIf"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"add-group"],[1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],[1,"staff-search-table"],[1,"col-12","col-md-6","col-xl-4"],[1,"form-group","local-forms"],["name","name_patient","id","name_patient","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"doctor-submit"],["type","submit",1,"btn","btn-primary","submit-list-form","me-2",3,"click"],[1,"table-responsive","staff-search-table"],["matSort","",1,"table","mb-0","table-striped","my-4",3,"matSortChange"],[1,"color_2"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[4,"ngIf"],[1,"dropdown","action-label"],[1,"action-label"],["href","javascript:void(0);",1,"custom-badge","status-green","cursor-pointer",3,"click"],["href","javascript:void(0);",1,"custom-badge","status-pink","cursor-pointer",3,"click"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8,"Clubes "),t.qZA()(),t.TgZ(9,"li",6),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",9),t._uU(12,"Susplantar"),t.qZA()()()()(),t.YNc(13,D,57,27,"div",10),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("routerLink",r.routes.leagueList),t.xp6(6),t.Q6J("ngIf",1==r.isLoaded))},dependencies:[h.mk,h.sg,h.O5,g.rH,u._Y,u.Fj,u.JJ,u.JL,T.YE,u.On,u.F,v.X$],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()}];let w=(()=>{const s=class{};let n=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[g.Bz.forChild(J),g.Bz]}),n})();var U=c(25108);let M=(()=>{const s=class{};let n=s;return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[h.ez,w,u.UX,d.JF,g.Bz,U.m]}),n})()}}]);