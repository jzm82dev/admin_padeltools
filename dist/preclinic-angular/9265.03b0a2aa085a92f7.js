"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[9265],{69265:(ht,f,_)=>{_.r(f),_.d(f,{JourneyModule:()=>gt});var u=_(36895),g=_(30027),b=_(20696),y=_(46382),t=_(94650),v=_(22477),p=_(42466),c=_(24006),m=_(3125),T=_(59549);function J(a,r){if(1&a&&(t.TgZ(0,"span",38),t._uU(1),t._UZ(2,"br"),t.qZA()),2&a){const n=r.$implicit;t.xp6(1),t.hij("",n.name," ")}}function L(a,r){if(1&a&&(t.TgZ(0,"span",38),t._uU(1),t._UZ(2,"br"),t.qZA()),2&a){const n=r.$implicit;t.xp6(1),t.hij("",n.name," ")}}const d=function(a,r){return{"color-blue":a,"color-red":r}},h=function(){return{standalone:!0}};function q(a,r){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"td",33),t.YNc(3,J,3,1,"span",34),t.qZA(),t.TgZ(4,"td")(5,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_1_local=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()(),t.TgZ(6,"td")(7,"input",36),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_2_local=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()(),t.TgZ(8,"td")(9,"input",36),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_3_local=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()()(),t.TgZ(10,"tr")(11,"td"),t.YNc(12,L,3,1,"span",34),t.qZA(),t.TgZ(13,"td")(14,"input",35),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_1_visiting=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()(),t.TgZ(15,"td")(16,"input",36),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_2_visiting=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()(),t.TgZ(17,"td")(18,"input",36),t.NdJ("ngModelChange",function(e){const o=t.CHM(n).index,l=t.oxw();return t.KtG(l.match_list[o].result_set_3_visiting=e)})("keypress",function(e){t.CHM(n);const i=t.oxw();return t.KtG(i.checkSetResult(e))}),t.qZA()()(),t.TgZ(19,"tr"),t._UZ(20,"td",37),t.qZA(),t.BQk()}if(2&a){const n=r.$implicit,s=r.index,e=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.local_players),t.xp6(2),t.Q6J("ngClass",t.WLB(26,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(29,h))("ngModel",e.match_list[s].result_set_1_local)("name",e.match_list[s].result_set_1_local),t.xp6(2),t.Q6J("ngClass",t.WLB(30,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(33,h))("ngModel",e.match_list[s].result_set_2_local)("name",e.match_list[s].result_set_2_local),t.xp6(2),t.Q6J("ngClass",t.WLB(34,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(37,h))("ngModel",e.match_list[s].result_set_3_local)("name",e.match_list[s].result_set_3_local),t.xp6(3),t.Q6J("ngForOf",n.visiting_players),t.xp6(2),t.Q6J("ngClass",t.WLB(38,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(41,h))("ngModel",e.match_list[s].result_set_1_visiting)("name",e.match_list[s].result_set_1_visiting),t.xp6(2),t.Q6J("ngClass",t.WLB(42,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(45,h))("ngModel",e.match_list[s].result_set_2_visiting)("name",e.match_list[s].result_set_2_visiting),t.xp6(2),t.Q6J("ngClass",t.WLB(46,d,"1"==n.match_finisehd,"0"==n.match_finisehd))("ngModelOptions",t.DdM(49,h))("ngModel",e.match_list[s].result_set_3_visiting)("name",e.match_list[s].result_set_3_visiting)}}function k(a,r){if(1&a&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&a){const n=r.$implicit;t.xp6(1),t.Oqu(n)}}function j(a,r){if(1&a&&(t.TgZ(0,"ul"),t.YNc(1,k,2,1,"li",30),t.qZA()),2&a){const n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.message_errors)}}function M(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",39)(1,"div",40)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.TgZ(6,"button",41),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.cleanMessage())}),t._UZ(7,"span",42),t.qZA(),t.YNc(8,j,2,1,"ul",43),t.qZA()()}if(2&a){const n=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,3,"commun_translations.error")),t.xp6(2),t.hij(" ",n.error_message," "),t.xp6(3),t.Q6J("ngIf",n.message_errors.length>0)}}function U(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",39)(1,"div",44)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.TgZ(6,"button",41),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.cleanMessage())}),t._UZ(7,"span",42),t.qZA()()()}if(2&a){const n=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,2,"commun_translations.success")," "),t.xp6(2),t.hij("",n.success_message," ")}}function w(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",17)(1,"div",45)(2,"button",46),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.saveResult())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5," \xa0 "),t.qZA()()}2&a&&(t.xp6(3),t.hij("",t.lcZ(4,1,"commun_translations.save")," "))}const S=function(a){return["/category/data",a,1]},N=function(a){return["/category/data",a,2]},O=function(a){return["/category/journeys",a]},Q=function(a){return["/category/ranking",a]};let P=(()=>{const r=class{constructor(s,e,i){this.activateRoute=s,this.journeySrv=e,this.translate=i,this.routes=y._,this.category_id="",this.journey_id="",this.match_list=[],this.name="",this.date="",this.success_message="",this.error_message="",this.message_errors=[],this.old_result_per_match=[],this.translations=[],this.can_edit=!1,this.type_matchs="double",this.match_tab_player=""}ngOnInit(){this.user=this.journeySrv.authSrv.user,this.initializeLanguage(),this.defaultResult(),this.activateRoute.params.subscribe(s=>{this.category_id=s.category_id,this.journey_id=s.journey_id,this.getJourneySelected()})}initializeLanguage(){this.translate.use(this.journeySrv.authSrv.language),this.translate.setDefaultLang(this.journeySrv.authSrv.language),this.translate.get(["commun_translations","leagues"]).subscribe(s=>{this.translations=s})}hasPermission(s=""){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes(s))&&(this.can_edit=!0,!0)}getJourneySelected(){this.journeySrv.getMatchsJourney(this.journey_id).subscribe(s=>{this.match_list=s.matchs,this.type_matchs=s.type_matchs,this.match_tab_player="singles"==this.type_matchs?this.translations.leagues.tabs.players:this.translations.leagues.tabs.couples,this.formatResults(),this.name=s.journey_name,this.date=new Date(s.date).toISOString(),this.defaultResult()})}formatResults(){let s;this.match_list.forEach(e=>{null!=e.result_set_1&&3==e.result_set_1.length&&(s=e.result_set_1.split("-"),e.result_set_1_local=s[0],e.result_set_1_visiting=s[1],e.result_set_1=null),null!=e.result_set_2&&3==e.result_set_2.length&&(s=e.result_set_2.split("-"),e.result_set_2_local=s[0],e.result_set_2_visiting=s[1],e.result_set_2=null),null!=e.result_set_3&&3==e.result_set_3.length&&(s=e.result_set_3.split("-"),e.result_set_3_local=s[0],e.result_set_3_visiting=s[1],e.result_set_3=null)})}defaultResult(){this.old_result_per_match=[],this.match_list.forEach(s=>{this.old_result_per_match.push({match:s.id,local_team:s.local_team,visiting_team:s.visiting_team,result_set_1_local:s.result_set_1_local,result_set_2_local:s.result_set_2_local,result_set_3_local:s.result_set_3_local,result_set_1_visiting:s.result_set_1_visiting,result_set_2_visiting:s.result_set_2_visiting,result_set_3_visiting:s.result_set_3_visiting})})}cleanMessage(){this.error_message="",this.success_message="",this.message_errors=[]}checkSetResult(s){const i=String.fromCharCode(s.charCode);/[0-7-]/.test(i)||s.preventDefault()}saveResult(){if(this.cleanMessage(),this.match_list.forEach(s=>{s.result_set_1_local&&s.result_set_1_visiting&&(s.result_set_1=s.result_set_1_local+"-"+s.result_set_1_visiting),s.result_set_2_local&&s.result_set_2_visiting&&(s.result_set_2=s.result_set_2_local+"-"+s.result_set_2_visiting),s.result_set_3_local&&s.result_set_3_visiting&&(s.result_set_3=s.result_set_3_local+"-"+s.result_set_3_visiting)}),1==this.correctResult()){this.checkUpdateResult();let s=new FormData;s.append("results",JSON.stringify(this.match_list)),this.journeySrv.saveResult(this.category_id,s).subscribe(e=>{200==e.message?(this.success_message=this.translations.commun_translations.data_save_correctly,this.getJourneySelected()):422==e.message?(this.error_message=this.translations.commun_translations.data_save_error,this.message_errors=e.errors_text):this.error_message=this.translations.commun_translations.data_save_error+" "+this.translations.commun_translations.consult_admin})}}checkUpdateResult(){let s=this.match_list.length;for(let e=0;e<s;e++)this.match_list[e].change_result=this.match_list[e].result_set_1_local!=this.old_result_per_match[e].result_set_1_local||this.match_list[e].result_set_2_local!=this.old_result_per_match[e].result_set_2_local||this.match_list[e].result_set_3_local!=this.old_result_per_match[e].result_set_3_local||this.match_list[e].result_set_1_visiting!=this.old_result_per_match[e].result_set_1_visiting||this.match_list[e].result_set_2_visiting!=this.old_result_per_match[e].result_set_2_visiting||this.match_list[e].result_set_3_visiting!=this.old_result_per_match[e].result_set_3_visiting}correctResult(){let s=/^(6|7)-[0-7]$|^[0-7]-(6|7)$/,e=this.match_list.length;console.log(this.match_list);for(let i=0;i<e;i++){if((""==this.match_list[i].result_set_1||null==this.match_list[i].result_set_1)&&(""!=this.match_list[i].result_set_2&&null!=this.match_list[i].result_set_2||""!=this.match_list[i].result_set_3&&null!=this.match_list[i].result_set_3))return this.error_message="Falta el resultado del Set 1 del partido "+(i+1),!1;if((""==this.match_list[i].result_set_2||null==this.match_list[i].result_set_2)&&""!=this.match_list[i].result_set_3&&null!=this.match_list[i].result_set_3)return this.error_message="Falta el resultado del Set 2 del partido "+(i+1),!1;if(""!=this.match_list[i].result_set_3&&null!=this.match_list[i].result_set_3&&(""==this.match_list[i].result_set_1||null==this.match_list[i].result_set_1||""==this.match_list[i].result_set_2||null==this.match_list[i].result_set_2)&&(this.error_message="Falta el resultado del Set 1 o 2 del partido "+(i+1)),""!=this.match_list[i].result_set_1&&null!=this.match_list[i].result_set_1&&!s.test(this.match_list[i].result_set_1))return this.error_message="Resultado incorrecto del Set 1 del partido "+(i+1),!1;if(""!=this.match_list[i].result_set_2&&null!=this.match_list[i].result_set_2&&!s.test(this.match_list[i].result_set_2))return this.error_message="Resultado incorrecto del Set 2 del partido "+(i+1),!1;if(""!=this.match_list[i].result_set_3&&null!=this.match_list[i].result_set_3&&!s.test(this.match_list[i].result_set_3))return this.error_message="Resultado incorrecto del Set 3 del partido "+(i+1),!1}return!0}};let a=r;return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.gz),t.Y36(v.W),t.Y36(p.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-journey"]],decls:92,vars:61,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","active"],[1,"card"],[1,"card-body"],[1,"col-12"],[1,"form-heading"],[1,"col-12","col-md-6","col-xl-6"],[1,"form-group","local-forms"],[1,"login-danger"],["name","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-12","col-md-4","col-xl-4"],["name","date","type","text","placeholder","","matInput","",1,"form-control","datetimepicker",3,"ngModel","matDatepicker","ngModelChange"],["picker",""],["matIconSuffix","",3,"for"],[1,"col-12","col-md-12","col-xl-12"],[1,"table","mb-0"],[1,"text-center"],[4,"ngFor","ngForOf"],["class","col-md-12 my-4",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"text-start"],["class","player-name",4,"ngFor","ngForOf"],["pattern","[0-7]","maxlength","1","tabindex","1","placeholder","-","type","text",1,"form-control","text-center","font-weight",3,"ngClass","ngModelOptions","ngModel","name","ngModelChange","keypress"],["pattern","[0-7]","maxlength","1","tabindex","3","placeholder","-","type","text",1,"form-control","text-center","font-weight",3,"ngClass","ngModelOptions","ngModel","name","ngModelChange","keypress"],["colspan","4",1,"test"],[1,"player-name"],[1,"col-md-12","my-4"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"text-end"],[1,"btn","btn-primary","submit-form","me-2","my-4",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"li",6),t._UZ(11,"i",8),t.qZA(),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA()()()()(),t.TgZ(15,"div",10)(16,"ul",11)(17,"li",12)(18,"a",13),t._uU(19),t.ALo(20,"translate"),t.qZA()(),t.TgZ(21,"li",12)(22,"a",13),t._uU(23),t.qZA()(),t.TgZ(24,"li",14)(25,"a",13),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"li",12)(29,"a",13),t._uU(30),t.ALo(31,"translate"),t.qZA()()()(),t.TgZ(32,"div",3)(33,"div",4)(34,"div",15)(35,"div",16)(36,"form")(37,"div",3)(38,"div",17)(39,"div",18)(40,"h4"),t._uU(41),t.ALo(42,"translate"),t.qZA()()(),t.TgZ(43,"div",19)(44,"div",20)(45,"label"),t._uU(46),t.ALo(47,"translate"),t.TgZ(48,"span",21),t._uU(49,"*"),t.qZA()(),t.TgZ(50,"input",22),t.NdJ("ngModelChange",function(l){return i.name=l}),t.qZA()()(),t.TgZ(51,"div",23)(52,"div",20)(53,"label"),t._uU(54),t.ALo(55,"translate"),t.TgZ(56,"span",21),t._uU(57,"*"),t.qZA()(),t.TgZ(58,"input",24),t.NdJ("ngModelChange",function(l){return i.date=l}),t.qZA(),t._UZ(59,"mat-datepicker",null,25)(61,"mat-datepicker-toggle",26),t.qZA()()()()()(),t.TgZ(62,"div",15)(63,"div",16)(64,"form")(65,"div",3)(66,"div",17)(67,"div",18)(68,"h4"),t._uU(69),t.ALo(70,"translate"),t.qZA()()()(),t.TgZ(71,"div",27)(72,"table",28)(73,"thead")(74,"tr")(75,"th",29),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"th",29),t._uU(79),t.ALo(80,"translate"),t.qZA(),t.TgZ(81,"th",29),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"th",29),t._uU(85),t.ALo(86,"translate"),t.qZA()()(),t.TgZ(87,"tbody"),t.YNc(88,q,21,50,"ng-container",30),t.qZA()()(),t.YNc(89,M,9,5,"div",31),t.YNc(90,U,8,4,"div",31),t.YNc(91,w,6,3,"div",32),t.qZA()()()()()()()),2&e){const o=t.MAs(60);t.xp6(7),t.Q6J("routerLink",i.routes.staffList),t.xp6(1),t.hij("",t.lcZ(9,27,"leagues.categories")," "),t.xp6(5),t.Oqu(t.lcZ(14,29,"leagues.update_restults")),t.xp6(5),t.Q6J("routerLink",t.VKq(53,S,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(20,31,"leagues.tabs.general_data")),t.xp6(3),t.Q6J("routerLink",t.VKq(55,N,i.category_id)),t.xp6(1),t.Oqu(i.match_tab_player),t.xp6(2),t.Q6J("routerLink",t.VKq(57,O,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(27,33,"leagues.tabs.journeys")),t.xp6(3),t.Q6J("routerLink",t.VKq(59,Q,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(31,35,"leagues.tabs.ranking")),t.xp6(11),t.Oqu(t.lcZ(42,37,"leagues.data")),t.xp6(5),t.Oqu(t.lcZ(47,39,"leagues.name")),t.xp6(4),t.Q6J("ngModel",i.name),t.xp6(4),t.hij("",t.lcZ(55,41,"leagues.journeys.date")," "),t.xp6(4),t.Q6J("ngModel",i.date)("matDatepicker",o),t.xp6(3),t.Q6J("for",o),t.xp6(8),t.Oqu(t.lcZ(70,43,"leagues.journeys.matchs")),t.xp6(7),t.Oqu(t.lcZ(77,45,"leagues.journeys.match")),t.xp6(3),t.Oqu(t.lcZ(80,47,"leagues.journeys.set_1")),t.xp6(3),t.Oqu(t.lcZ(83,49,"leagues.journeys.set_2")),t.xp6(3),t.Oqu(t.lcZ(86,51,"leagues.journeys.set_3")),t.xp6(3),t.Q6J("ngForOf",i.match_list),t.xp6(1),t.Q6J("ngIf",""!=i.error_message),t.xp6(1),t.Q6J("ngIf",""!=i.success_message),t.xp6(1),t.Q6J("ngIf",i.hasPermission("edit_league"))}},dependencies:[u.mk,u.sg,u.O5,g.rH,c._Y,c.Fj,c.JJ,c.JL,c.nD,c.c5,c.On,c.F,m.Mq,m.hl,m.nW,T.R9,p.X$],styles:["tr[_ngcontent-%COMP%]{vertical-align:middle}.player-name[_ngcontent-%COMP%]{font-size:14px}.font-weight[_ngcontent-%COMP%]{font-weight:700}.center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{vertical-align:middle!important;font-weight:700}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}[_ngcontent-%COMP%]::placeholder{color:gray;opacity:.3}.color-red[_ngcontent-%COMP%]{background-color:#fbe9eb}.color-blue[_ngcontent-%COMP%]{background-color:#e6f0ff}.test[_ngcontent-%COMP%]{background-color:#f6f4f5}"]}),a})();var x=_(30671),Z=_(96308);const D=["closebutton"],E=function(a){return["/leagues/list-league/edit",a]};function I(a,r){if(1&a&&(t.TgZ(0,"li",13)(1,"a",14),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&a){const n=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,E,n.league_id)),t.xp6(1),t.Oqu(t.lcZ(3,2,"leagues.league"))}}function K(a,r){1&a&&(t.TgZ(0,"div",28)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"translate"),t.qZA()()),2&a&&(t.xp6(2),t.hij("",t.lcZ(3,3,"leagues.journeys.journey_to_be_defined"),". "),t.xp6(3),t.hij(" ",t.lcZ(6,5,"leagues.journeys.no_calendar"),"."),t.xp6(3),t.hij("",t.lcZ(9,7,"leagues.journeys.create_calendar_text"),"."))}function F(a,r){1&a&&(t.TgZ(0,"div",28)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"translate"),t.qZA()()()),2&a&&(t.xp6(2),t.hij("",t.lcZ(3,2,"leagues.journeys.journey_to_be_defined"),". "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"leagues.journeys.no_calendar_no_couples"),"."))}function H(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",29)(1,"div",30)(2,"button",31),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(3);return t.KtG(e.createCalendar())}),t._uU(3),t.ALo(4,"translate"),t.qZA()()()}2&a&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"leagues.journeys.create_calendar")))}function G(a,r){if(1&a&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"div",23)(5,"ul",24)(6,"li")(7,"div",25),t.YNc(8,K,10,9,"div",26),t.YNc(9,F,7,6,"div",26),t.qZA()()(),t.YNc(10,H,5,3,"div",27),t.qZA()()()()()),2&a){const n=t.oxw(2);t.xp6(8),t.Q6J("ngIf",n.total_couples>0),t.xp6(1),t.Q6J("ngIf",0==n.total_couples),t.xp6(1),t.Q6J("ngIf",n.total_couples>0&&n.hasPermission("edit_league"))}}function Y(a,r){if(1&a&&(t.TgZ(0,"div",62)(1,"a",63),t._UZ(2,"img",64),t.qZA()()),2&a){const n=t.oxw(3);t.xp6(1),t.Q6J("routerLink",n.routes.addCourt)}}const C=function(a,r){return["edit",a,r]},R=function(a,r){return{"status-green":a,"status-yellow":r}};function V(a,r){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",65),t._uU(9),t.qZA()(),t.TgZ(10,"td",66)(11,"div",67)(12,"a",68),t._UZ(13,"i",69),t.qZA(),t.TgZ(14,"div",70)(15,"a",71),t._UZ(16,"i",72),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"translate"),t.qZA()()()()()),2&a){const n=r.$implicit,s=r.index,e=t.oxw(3);t.xp6(2),t.Oqu(s+1),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.date),t.xp6(2),t.Q6J("routerLink",t.WLB(14,C,e.category_id,n.id))("ngClass",t.WLB(17,R,0==n.matchs_pending,n.matchs_pending>0)),t.xp6(1),t.AsE("",n.matchs_pending>0?e.pending_text:e.finished_text," (",n.matchs_pending,")"),t.xp6(6),t.Q6J("routerLink",t.WLB(20,C,e.category_id,n.id)),t.xp6(2),t.AsE(" ",t.lcZ(18,10,"commun_translations.view"),"/",t.lcZ(19,12,"commun_translations.edit"),"")}}function z(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",73)(1,"div",74)(2,"strong"),t._uU(3,"Error!"),t.qZA(),t._uU(4),t.TgZ(5,"button",75),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(3);return t.KtG(e.cleanMessage())}),t._UZ(6,"span",76),t.qZA()()()}if(2&a){const n=t.oxw(3);t.xp6(4),t.hij(" ",n.error_message," ")}}function B(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"li",78),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(4);return t.KtG(e.moveToPage(e.currentPage-2))}),t.TgZ(1,"a",79),t._uU(2," ... "),t.qZA()()}if(2&a){const n=t.oxw(4);t.Q6J("hidden",1===n.currentPage)}}function W(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"li",78),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(4);return t.KtG(e.moveToPage(e.currentPage+2))}),t.TgZ(1,"a",79),t._uU(2," ... "),t.qZA()()}if(2&a){const n=t.oxw(4);t.Q6J("hidden",n.currentPage>=n.pageNumberArray[n.pageNumberArray.length-2]||n.totalData<n.serialNumberArray[n.serialNumberArray.length-1])}}function $(a,r){if(1&a){const n=t.EpF();t.ynx(0),t.TgZ(1,"li",59)(2,"a",61),t.NdJ("click",function(){const i=t.CHM(n).$implicit,o=t.oxw(3);return t.KtG(o.moveToPage(i))}),t._uU(3),t.qZA()(),t.YNc(4,B,3,1,"li",77),t.YNc(5,W,3,1,"li",77),t.BQk()}if(2&a){const n=r.$implicit,s=r.index,e=t.oxw(3);t.xp6(1),t.ekj("active",n===e.currentPage),t.Q6J("ngClass",e.pageNumberArray[e.currentPage-2]>n&&1!==n&&e.pageNumberArray.length>6||e.pageNumberArray[e.currentPage]<n&&1!==n&&e.pageNumberArray.length>6&&e.pageNumberArray.length!==n?"hide-page-no":"show-page-no"),t.xp6(2),t.hij(" ",n," "),t.xp6(1),t.Q6J("ngIf",0===s&&e.pageNumberArray.length>6&&e.currentPage>2),t.xp6(1),t.Q6J("ngIf",s===e.pageNumberArray.length-2&&e.pageNumberArray.length>6)}}const A=function(a){return{disabled:a}};function X(a,r){if(1&a){const n=t.EpF();t.TgZ(0,"div",21)(1,"div",32)(2,"div",33)(3,"div",34)(4,"div",35)(5,"h3"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.TgZ(8,"div",36)(9,"div",37)(10,"input",38),t.NdJ("ngModelChange",function(e){t.CHM(n);const i=t.oxw(2);return t.KtG(i.searchDataValue=e)})("ngModelChange",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.searchData(e.searchDataValue))}),t.qZA(),t.TgZ(11,"a",39),t._UZ(12,"img",40),t.qZA()(),t.TgZ(13,"div",41)(14,"a",42),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.refresh())}),t._UZ(15,"img",43),t.qZA()()()()(),t.YNc(16,Y,3,1,"div",44),t.qZA()(),t.TgZ(17,"div",45)(18,"table",46),t.NdJ("matSortChange",function(e){t.CHM(n);const i=t.oxw(2);return t.KtG(i.sortData(e))}),t.TgZ(19,"thead")(20,"tr")(21,"th",47),t._uU(22,"#"),t.qZA(),t.TgZ(23,"th",48),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"th",49),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"th",50),t._uU(30),t.ALo(31,"translate"),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"th"),t.qZA()(),t.TgZ(34,"tbody"),t.YNc(35,V,20,23,"tr",51),t.qZA()(),t.YNc(36,z,7,1,"div",52),t.TgZ(37,"div",53)(38,"div",54)(39,"div",55),t._uU(40),t.qZA()(),t.TgZ(41,"div",56)(42,"div",57)(43,"ul",58)(44,"li",59)(45,"a",60),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.getMoreData("previous"))}),t._uU(46,"Previous"),t.qZA()(),t.YNc(47,$,6,6,"ng-container",51),t.TgZ(48,"li",59)(49,"a",61),t.NdJ("click",function(){t.CHM(n);const e=t.oxw(2);return t.KtG(e.getMoreData("next"))}),t._uU(50,"Next "),t.qZA()()()()()()()()}if(2&a){const n=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,15,"leagues.journeys.journeys")),t.xp6(4),t.Q6J("ngModel",n.searchDataValue),t.xp6(6),t.Q6J("ngIf",1==n.can_edit),t.xp6(8),t.Oqu(t.lcZ(25,17,"leagues.journeys.name")),t.xp6(3),t.Oqu(t.lcZ(28,19,"leagues.journeys.date")),t.xp6(3),t.AsE("",t.lcZ(31,21,"leagues.journeys.status")," (",t.lcZ(32,23,"leagues.journeys.pending"),")"),t.xp6(5),t.Q6J("ngForOf",n.journeysList),t.xp6(1),t.Q6J("ngIf",""!=n.error_message),t.xp6(4),t.lnq(" Showing ",n.serialNumberArray[0]," to ",n.serialNumberArray[n.serialNumberArray.length-1]," of ",n.totalData," entries "),t.xp6(4),t.Q6J("ngClass",t.VKq(25,A,1===n.currentPage)),t.xp6(3),t.Q6J("ngForOf",n.pageNumberArray),t.xp6(1),t.Q6J("ngClass",t.VKq(27,A,n.currentPage===n.pageNumberArray[n.pageNumberArray.length-1]||0===n.journeysList.length))}}function tt(a,r){if(1&a&&(t.TgZ(0,"div",3)(1,"div",3),t.YNc(2,G,11,3,"div",17),t.TgZ(3,"div",4),t.YNc(4,X,51,29,"div",18),t.qZA()()()),2&a){const n=t.oxw();t.xp6(2),t.Q6J("ngIf",0==n.totalData),t.xp6(2),t.Q6J("ngIf",n.totalData>0)}}const et=function(a){return["/leagues/list-league/edit/",a]},st=function(a){return["/category/data",a,1]},nt=function(a){return["/category/data",a,2]},it=function(a){return["/category/journeys",a]},at=function(a){return["/category/ranking",a]};let rt=(()=>{const r=class{constructor(s,e,i){this.journeySrv=s,this.activateRoute=e,this.translate=i,this.routes=y._,this.category_id="",this.journeysList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=20,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.journeys_general=[],this.statusText="",this.error_message="",this.can_edit=!1,this.isLoaded=!1,this.translations=[],this.total_couples=0,this.pending_text="",this.finished_text="",this.type_matchs="double",this.match_tab_player="Players",this.league_id="",this.category_name=""}ngOnInit(){this.user=this.journeySrv.authSrv.user,this.initializeLanguage(),this.activateRoute.params.subscribe(s=>{this.category_id=s.id}),this.getTableData()}initializeLanguage(){this.translate.use(this.journeySrv.authSrv.language),this.translate.setDefaultLang(this.journeySrv.authSrv.language),this.translate.get(["commun_translations","leagues"]).subscribe(s=>{this.translations=s,this.pending_text=this.translations.leagues.journeys.pending,this.finished_text=this.translations.leagues.journeys.finished})}getTableData(s=1,e=""){this.journeysList=[],this.serialNumberArray=[],this.journeySrv.listJourneys(s,this.category_id,this.searchDataValue).subscribe(i=>{this.totalData=i.total,this.journeysList=i.journeys,this.total_couples=i.total_couples,this.type_matchs=i.type_matchs,this.league_id=i.league_id,this.category_name=i.category_name,this.match_tab_player="singles"==this.type_matchs?this.translations.leagues.tabs.players:this.translations.leagues.tabs.couples,this.dataSource=new x.by(this.journeysList),this.calculateTotalPages(this.totalData,this.pageSize),this.isLoaded=!0})}hasPermission(s=""){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes(s))&&(this.can_edit=!0,!0)}getTableDataGeneral(){new u.uU("en-US"),this.journeysList=[],this.serialNumberArray=[],this.journeys_general.map((e,i)=>{const o=i+1;i>=this.skip&&o<=this.limit&&(this.journeysList.push(e),this.serialNumberArray.push(o))}),this.dataSource=new x.by(this.journeysList),this.calculateTotalPages(this.totalData,this.pageSize)}searchData(s){this.dataSource.filter=s.trim().toLowerCase(),this.getTableData(this.currentPage,this.searchDataValue)}sortData(s){const e=this.journeysList.slice();this.journeysList=s.active&&""!==s.direction?e.sort((i,o)=>(i[s.active]<o[s.active]?-1:1)*("asc"===s.direction?1:-1)):e}getMoreData(s){"next"==s?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage)):"previous"==s&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage))}moveToPage(s){this.currentPage=s,this.skip=this.pageSelection[s-1].skip,this.limit=this.pageSelection[s-1].limit,s>this.currentPage?this.pageIndex=s-1:s<this.currentPage&&(this.pageIndex=s+1),this.getTableData(this.currentPage)}refresh(){this.pageSelection=[],this.searchDataValue="",this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}calculateTotalPages(s,e){this.pageNumberArray=[],this.totalPages=s/e,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var i=1;i<=this.totalPages;i++){const o=e*i,l=o-e;this.pageNumberArray.push(i),this.pageSelection.push({skip:l,limit:o})}}selectCourt(s){this.journey_selected=s}cleanMessage(){this.error_message=""}createCalendar(){this.journeySrv.createCalendar(this.category_id).subscribe(s=>{this.journeysList=s.journeys,this.totalData=s.total})}};let a=r;return r.\u0275fac=function(e){return new(e||r)(t.Y36(v.W),t.Y36(g.gz),t.Y36(p.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-journey"]],viewQuery:function(e,i){if(1&e&&t.Gf(D,5),2&e){let o;t.iGM(o=t.CRH())&&(i.closebutton=o.first)}},decls:34,vars:34,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],[3,"routerLink"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],["class","nav-item",4,"ngIf"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","active"],["class","row",4,"ngIf"],["class","col-md-12",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"col-md-12"],[1,"card"],[1,"card-body"],[1,"activity"],[1,"activity-box"],[1,"activity-list"],[1,"activity-content","timeline-group-blk"],["class","comman-activitys flex-grow-1",4,"ngIf"],["class","col-12 d-flex align-items-center",4,"ngIf"],[1,"comman-activitys","flex-grow-1"],[1,"col-12","d-flex","align-items-center"],[1,"follow-btn-group"],["type","submit",1,"btn","btn-info","message-btns",3,"click"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],["class","col-auto text-end float-end ms-auto download-grp add-group",4,"ngIf"],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","enumerate"],["mat-sort-header","name"],["mat-sort-header","start_date"],["mat-sort-header","status"],[4,"ngFor","ngForOf"],["class","col-md-12 my-4",4,"ngIf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],[1,"col-auto","text-end","float-end","ms-auto","download-grp","add-group"],["routerLinkActive","router-link-active",1,"btn","btn-primary","add-pluss","ms-2",3,"routerLink"],["src","assets/img/icons/plus.svg","alt",""],["href","#",1,"custom-badge",3,"routerLink","ngClass"],[1,"text-end"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-eye","m-r-5"],[1,"col-md-12","my-4"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"li",6),t._UZ(11,"i",8),t.qZA(),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA()()()()(),t.TgZ(15,"div",10)(16,"ul",11),t.YNc(17,I,4,6,"li",12),t.TgZ(18,"li",13)(19,"a",14),t._uU(20),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"li",13)(23,"a",14),t._uU(24),t.qZA()(),t.TgZ(25,"li",15)(26,"a",14),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"li",13)(30,"a",14),t._uU(31),t.ALo(32,"translate"),t.qZA()()()(),t.YNc(33,tt,5,2,"div",16),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("routerLink",t.VKq(24,et,i.league_id)),t.xp6(1),t.hij("",t.lcZ(9,14,"leagues.league")," "),t.xp6(5),t.AsE("",t.lcZ(14,16,"leagues.category")," (",i.category_name,")"),t.xp6(4),t.Q6J("ngIf",null!=i.league_id),t.xp6(2),t.Q6J("routerLink",t.VKq(26,st,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(21,18,"leagues.tabs.general_data")),t.xp6(3),t.Q6J("routerLink",t.VKq(28,nt,i.category_id)),t.xp6(1),t.Oqu(i.match_tab_player),t.xp6(2),t.Q6J("routerLink",t.VKq(30,it,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(28,20,"leagues.tabs.journeys")),t.xp6(3),t.Q6J("routerLink",t.VKq(32,at,i.category_id)),t.xp6(1),t.Oqu(t.lcZ(32,22,"leagues.tabs.ranking")),t.xp6(2),t.Q6J("ngIf",i.isLoaded))},dependencies:[u.mk,u.sg,u.O5,g.rH,g.Od,c.Fj,c.JJ,c.On,Z.YE,Z.nU,p.X$]}),a})();var ot=_(58903);const lt=[{path:"",component:b.H,children:[{path:"",component:rt},{path:"edit/:category_id/:journey_id",component:P},{path:"edit-result/:category_id/:match_id",component:ot.a}]}];let _t=(()=>{const r=class{};let a=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(lt),g.Bz]}),a})();var ct=_(80529),ut=_(25108);let gt=(()=>{const r=class{};let a=r;return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[u.ez,_t,c.u5,c.UX,ct.JF,g.Bz,ut.m]}),a})()}}]);