"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[1525],{1525:(L,m,t)=>{t.r(m),t.d(m,{LoginModule:()=>E});var l=t(6895),c=t(27),n=t(433),u=t(6382),o=t(4650),p=t(866);function _(e,v){1&e&&(o.TgZ(0,"div"),o._uU(1," Email is required. "),o.qZA())}function h(e,v){1&e&&(o.TgZ(0,"div"),o._uU(1," Please, enter valid email address. "),o.qZA())}function Z(e,v){if(1&e&&(o.TgZ(0,"div",37),o.YNc(1,_,2,0,"div",38),o.YNc(2,h,2,0,"div",38),o.qZA()),2&e){const s=o.oxw();o.xp6(1),o.Q6J("ngIf",s.f.email.errors&&s.f.email.errors.required),o.xp6(1),o.Q6J("ngIf",s.f.email.errors&&s.f.email.errors.email)}}function d(e,v){1&e&&(o.TgZ(0,"div"),o._uU(1," Password is required. "),o.qZA())}function C(e,v){if(1&e&&(o.TgZ(0,"div",37),o.YNc(1,d,2,0,"div",38),o.qZA()),2&e){const s=o.oxw();o.xp6(1),o.Q6J("ngIf",s.f.password.errors&&s.f.password.errors.required)}}function r(e,v){1&e&&(o.TgZ(0,"div",39)(1,"strong"),o._uU(2,"Error!"),o.qZA(),o._uU(3," El usuario o contrase\xf1a es incorrecto. "),o.TgZ(4,"button",40),o._UZ(5,"span",41),o.qZA()())}const g=function(e){return{"is-invalid":e}},f=[{path:"",component:(()=>{class e{get f(){return this.form.controls}constructor(s,a){this.auth=s,this.router=a,this.routes=u._,this.passwordClass=!1,this.error=!1,this.form=new n.cw({email:new n.NI("admin@dreamguys.in",[n.kI.required,n.kI.email]),password:new n.NI("123456",[n.kI.required])})}ngOnInit(){localStorage.getItem("authenticated")&&this.router.navigate([u._.adminDashboard])}loginFormSubmit(){this.form.valid&&this.auth.login(this.form.value.email?this.form.value.email:"",this.form.value.password?this.form.value.password:"").subscribe(s=>{s?setTimeout(()=>{document.location.reload()},50):this.error=!0},s=>{console.log(s)})}togglePassword(){this.passwordClass=!this.passwordClass}static#o=this.\u0275fac=function(a){return new(a||e)(o.Y36(p.e),o.Y36(c.F0))};static#e=this.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:57,vars:16,consts:[[1,"main-wrapper","login-body"],[1,"container-fluid","px-0"],[1,"row"],[1,"col-lg-6","login-wrap"],[1,"login-sec"],[1,"log-img"],["src","assets/img/login-02.png","alt","Logo",1,"img-fluid"],[1,"col-lg-6","login-wrap-bg"],[1,"login-wrapper"],[1,"loginbox"],[1,"login-right"],[1,"login-right-wrap"],[1,"account-logo"],[3,"routerLink"],["src","assets/img/login-logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"login-danger"],["formControlName","email","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","password",1,"form-control","pass-input",3,"type","ngClass"],[1,"profile-views","toggle-password",3,"ngClass","click"],[1,"forgotpass"],[1,"remember-me"],[1,"custom_check","mr-2","mb-0","d-inline-flex","remember-me"],["type","checkbox","name","radio"],[1,"checkmark"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"form-group","login-btn"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"next-sign"],[1,"account-subtitle"],[1,"social-login"],["href","javascript:;"],["src","assets/img/icons/login-icon-01.svg","alt",""],["src","assets/img/icons/login-icon-02.svg","alt",""],["src","assets/img/icons/login-icon-03.svg","alt",""],[1,"invalid-feedback"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","data-bs-dismiss","alert","aria-label","Close",1,"btn-close"],["aria-hidden","true"]],template:function(a,i){1&a&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),o._UZ(6,"img",6),o.qZA()()(),o.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"div",12)(13,"a",13),o._UZ(14,"img",14),o.qZA()(),o.TgZ(15,"h2"),o._uU(16,"Login"),o.qZA(),o.TgZ(17,"form",15),o.NdJ("ngSubmit",function(){return i.loginFormSubmit()}),o.TgZ(18,"div",16)(19,"label"),o._uU(20,"Email "),o.TgZ(21,"span",17),o._uU(22,"*"),o.qZA()(),o._UZ(23,"input",18),o.YNc(24,Z,3,2,"div",19),o.qZA(),o.TgZ(25,"div",16)(26,"label"),o._uU(27,"Password "),o.TgZ(28,"span",17),o._uU(29,"*"),o.qZA()(),o._UZ(30,"input",20),o.YNc(31,C,2,1,"div",19),o.TgZ(32,"span",21),o.NdJ("click",function(){return i.togglePassword()}),o.qZA()(),o.TgZ(33,"div",22)(34,"div",23)(35,"label",24),o._uU(36," Remember me "),o._UZ(37,"input",25)(38,"span",26),o.qZA()(),o.TgZ(39,"a",13),o._uU(40,"Forgot Password?"),o.qZA()(),o.YNc(41,r,6,0,"div",27),o.TgZ(42,"div",28)(43,"button",29),o._uU(44," Login "),o.qZA()()(),o.TgZ(45,"div",30)(46,"p",31),o._uU(47," Need an account? "),o.TgZ(48,"a",13),o._uU(49,"Sign Up"),o.qZA()(),o.TgZ(50,"div",32)(51,"a",33),o._UZ(52,"img",34),o.qZA(),o.TgZ(53,"a",33),o._UZ(54,"img",35),o.qZA(),o.TgZ(55,"a",33),o._UZ(56,"img",36),o.qZA()()()()()()()()()()()),2&a&&(o.xp6(13),o.Q6J("routerLink",i.routes.adminDashboard),o.xp6(4),o.Q6J("formGroup",i.form),o.xp6(6),o.Q6J("ngClass",o.VKq(12,g,i.f.email.touched&&i.f.email.invalid)),o.xp6(1),o.Q6J("ngIf",i.f.email.touched&&i.f.email.invalid),o.xp6(6),o.Q6J("type",i.passwordClass?"text":"password")("ngClass",o.VKq(14,g,i.f.password.touched&&i.f.password.invalid)),o.xp6(1),o.Q6J("ngIf",i.f.password.touched&&i.f.password.invalid),o.xp6(1),o.Q6J("ngClass",i.passwordClass?"feather icon-eye":"feather icon-eye-off"),o.xp6(7),o.Q6J("routerLink",i.routes.forgotPassword),o.xp6(2),o.Q6J("ngIf",1==i.error),o.xp6(2),o.Q6J("disabled",i.form.invalid),o.xp6(5),o.Q6J("routerLink",i.routes.register))},dependencies:[l.mk,l.O5,c.rH,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return e})()}];let U=(()=>{class e{static#o=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=o.oAB({type:e});static#t=this.\u0275inj=o.cJS({imports:[c.Bz.forChild(f),c.Bz]})}return e})();var I=t(6943);let E=(()=>{class e{static#o=this.\u0275fac=function(a){return new(a||e)};static#e=this.\u0275mod=o.oAB({type:e});static#t=this.\u0275inj=o.cJS({imports:[l.ez,U,I.m]})}return e})()},5862:(L,m,t)=>{t.d(m,{$g:()=>n});const n="http://api-clinic.fabrikapps.es/api"},866:(L,m,t)=>{t.d(m,{e:()=>Z});var l=t(6382),c=t(5862),n=t(4004),u=t(262),o=t(9646),p=t(4650),_=t(27),h=t(529);let Z=(()=>{class d{constructor(r,g){this.router=r,this.http=g,this.getLocalStorage()}login(r,g){return console.log("entrmos en el login"),this.http.post(c.$g+"/auth/login",{email:r,password:g}).pipe((0,n.U)(f=>this.saveLocalStorage(f)),(0,u.K)(f=>(console.log(f),(0,o.of)(void 0))))}saveLocalStorage(r){return console.log("response login backend:",r),!(!r||!r.access_token||(console.log("entramos en el if"),localStorage.setItem("token",r.access_token),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("authenticated","true"),0))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("authenticated"),this.router.navigate([l._.login])}getLocalStorage(){if(localStorage.getItem("token")&&localStorage.getItem("user")){let r=localStorage.getItem("user");this.user=JSON.parse(r||""),this.token=localStorage.getItem("token")}else this.user=null,this.token=null}static#o=this.\u0275fac=function(g){return new(g||d)(p.LFG(_.F0),p.LFG(h.eN))};static#e=this.\u0275prov=p.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);