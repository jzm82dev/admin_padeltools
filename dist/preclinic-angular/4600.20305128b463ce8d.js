"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[4600],{4600:(gt,m,c)=>{c.r(m),c.d(m,{BookingModule:()=>ht});var _=c(6895),d=c(27),f=c(6382),t=c(4650),b=c(5626),x=c(3210),v=c(2466),k=c(2113),h=c(3125),C=c(9549),g=c(4006),Z=c(3384);const w=["closebuttonAddShedule"],y=["closebuttonShowhedule"],T=["closebuttonDeleteReservation"],u=function(i){return{active:i}},A=function(i,s){return["/club/booking","padel",i,s]};function M(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",64)(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.loadFalse())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(5,u,"padel"==e.sport_selected)),t.xp6(1),t.Q6J("routerLink",t.WLB(7,A,e.hash_club,e.date)),t.xp6(1),t.Oqu(t.lcZ(3,3,"club_translations.sport_1"))}}const q=function(i,s){return["/club/booking","tennis",i,s]};function B(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",64)(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.loadFalse())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(5,u,"tennis"==e.sport_selected)),t.xp6(1),t.Q6J("routerLink",t.WLB(7,q,e.hash_club,e.date)),t.xp6(1),t.Oqu(t.lcZ(3,3,"club_translations.sport_2"))}}const J=function(i,s){return["/club/booking","pickleball",i,s]};function O(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",64)(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.loadFalse())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(5,u,"pickleball"==e.sport_selected)),t.xp6(1),t.Q6J("routerLink",t.WLB(7,J,e.hash_club,e.date)),t.xp6(1),t.Oqu(t.lcZ(3,3,"club_translations.sport_3"))}}const S=function(i,s){return["/club/booking","squash",i,s]};function U(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",64)(1,"a",65),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.loadFalse())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(5,u,"squash"==e.sport_selected)),t.xp6(1),t.Q6J("routerLink",t.WLB(7,S,e.hash_club,e.date)),t.xp6(1),t.Oqu(t.lcZ(3,3,"club_translations.sport_4"))}}const N=function(i,s){return["/club/booking","badminton",i,s]};function P(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"li",64)(1,"a",66),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.loadFalse())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}if(2&i){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(5,u,"badminton"==e.sport_selected)),t.xp6(1),t.Q6J("routerLink",t.WLB(7,N,e.hash_club,e.date)),t.xp6(1),t.Oqu(t.lcZ(3,3,"club_translations.sport_5"))}}function Q(i,s){if(1&i&&(t.TgZ(0,"div",9)(1,"div",60)(2,"ul",61),t.YNc(3,M,4,10,"li",62),t.YNc(4,B,4,10,"li",62),t.YNc(5,O,4,10,"li",63),t.YNc(6,U,4,10,"li",63),t.YNc(7,P,4,10,"li",63),t.qZA()()()),2&i){const e=t.oxw(3);t.xp6(3),t.Q6J("ngIf",1==e.hasPadelCourts),t.xp6(1),t.Q6J("ngIf",1==e.hasTennisCourts),t.xp6(1),t.Q6J("ngIf",1==e.hasPickleballCourts),t.xp6(1),t.Q6J("ngIf",1==e.hasSquashCourts),t.xp6(1),t.Q6J("ngIf",1==e.hasBadmintonCourts)}}function I(i,s){if(1&i&&(t.TgZ(0,"div",9)(1,"div",36)(2,"h2"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"h3"),t._uU(6),t.ALo(7,"translate"),t.qZA()()()),2&i){const e=t.oxw(3);t.xp6(3),t.AsE("",t.lcZ(4,3,"reservations.phrase_club_closed")," ",e.day_name,""),t.xp6(3),t.Oqu(t.lcZ(7,5,"commun_translations.sorry_inconvenience"))}}function D(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",70),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.openPopup())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&i){const e=t.oxw(4);t.Q6J("disabled",e.disableButtonReserve),t.xp6(1),t.Oqu(t.lcZ(2,2,"reservations.reserve_court"))}}function L(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(4);return t.KtG(n.scrollToBottom())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"reservations.reserve_court")))}function Y(i,s){if(1&i&&(t.TgZ(0,"div",67),t.YNc(1,D,3,4,"button",68),t.YNc(2,L,3,3,"button",69),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",0==e.disableButtonReserve),t.xp6(1),t.Q6J("ngIf",1==e.disableButtonReserve)}}function H(i,s){if(1&i&&(t.TgZ(0,"th",72),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.hij(" ",e.name.length>5?t.Dn7(2,1,e.name,0,5)+".":e.name,"")}}function F(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",77),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw().$implicit,a=t.oxw(3);return t.KtG(a.selectHour(r,n.id))}),t.qZA()}if(2&i){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.hYB("id","",o.id,"_",e.id,"")}}function R(i,s){1&i&&t._UZ(0,"td",78)}const E=function(i,s,e,o,n,r){return{"recurrent-booking-first border-td":i,"recurrent-booking border-td":s,"class-lesson-booking-first border-td":e,"class-lesson-booking border-td":o,"one-time-booking-first border-td":n,"one-time-booking border-td":r}};function G(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"td",79),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,r=t.oxw(4);return t.KtG(r.showReserve(n.reservation_id))}),t.TgZ(1,"p",80),t._uU(2),t.qZA()()}if(2&i){const e=t.oxw().$implicit;t.Q6J("ngClass",t.HTZ(2,E,"recurrent"==e.type&&""!=e.reservation_name,""==e.reservation_name&&"recurrent"==e.type,"class-lessons"==e.type&&""!=e.reservation_name,""==e.reservation_name&&"class-lessons"==e.type,"one-time"==e.type&&""!=e.reservation_name,""==e.reservation_name&&"one-time"==e.type)),t.xp6(2),t.Oqu(e.reservation_name)}}function K(i,s){if(1&i&&(t.ynx(0),t.YNc(1,F,1,2,"td",74),t.YNc(2,R,1,0,"td",75),t.YNc(3,G,3,9,"td",76),t.BQk()),2&i){const e=s.$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.reservation_id&&o.hour_open),t.xp6(1),t.Q6J("ngIf",!o.hour_open),t.xp6(1),t.Q6J("ngIf",e.reservation_id&&o.hour_open)}}function j(i,s){if(1&i&&(t.TgZ(0,"tr")(1,"td",73),t._uU(2),t.qZA(),t.YNc(3,K,4,3,"ng-container",59),t.qZA()),2&i){const e=s.$implicit;t.xp6(2),t.hij("",e.format_hour_start,"h"),t.xp6(1),t.Q6J("ngForOf",e.courts)}}function z(i,s){if(1&i&&(t.TgZ(0,"div",83),t._uU(1),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" ",e.error_message," ")}}function W(i,s){if(1&i&&(t.TgZ(0,"div",81),t.YNc(1,z,2,1,"div",82),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.schedule.length>0)}}function $(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",36)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",37)(5,"div",38)(6,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.lessDay())}),t._UZ(7,"i",40),t.qZA()(),t.TgZ(8,"div",41)(9,"div",18)(10,"input",42),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw(2);return t.KtG(r.date_reservation=n)})("dateChange",function(n){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeDateReservations(n))}),t.qZA(),t._UZ(11,"mat-datepicker",null,43)(13,"mat-datepicker-toggle",44),t.qZA()(),t.TgZ(14,"div",45)(15,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.moreDay())}),t._UZ(16,"i",46),t.qZA()()(),t.TgZ(17,"div",47)(18,"div",48)(19,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.lessDay())}),t._UZ(20,"i",40),t.qZA()(),t.TgZ(21,"div",49)(22,"div",18)(23,"input",42),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw(2);return t.KtG(r.date_reservation=n)})("dateChange",function(n){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeDateReservations(n))}),t.qZA(),t._UZ(24,"mat-datepicker",null,50)(26,"mat-datepicker-toggle",44),t.qZA()(),t.TgZ(27,"div",51)(28,"a",39),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.moreDay())}),t._UZ(29,"i",46),t.qZA()()(),t.YNc(30,Q,8,5,"div",52),t.YNc(31,I,8,7,"div",52),t.TgZ(32,"div",9)(33,"div",53),t.YNc(34,Y,3,2,"div",54),t.TgZ(35,"div",55)(36,"table",56)(37,"thead")(38,"tr")(39,"th",57),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,H,3,5,"th",58),t.qZA()(),t.TgZ(43,"tbody"),t.YNc(44,j,4,2,"tr",59),t.qZA()()()()(),t.YNc(45,W,2,1,"div",11),t.qZA()}if(2&i){const e=t.MAs(12),o=t.MAs(25),n=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,15,"reservations.reservation")," ",n.day_name,""),t.xp6(8),t.Q6J("matDatepicker",e)("ngModel",n.date_reservation),t.xp6(3),t.Q6J("for",e),t.xp6(10),t.Q6J("matDatepicker",o)("ngModel",n.date_reservation),t.xp6(3),t.Q6J("for",o),t.xp6(4),t.Q6J("ngIf",n.total_sport_clubs>1&&n.schedule.length>0),t.xp6(1),t.Q6J("ngIf",1==n.loaded&&0==n.schedule.length),t.xp6(3),t.Q6J("ngIf",0==n.can_edit),t.xp6(6),t.Oqu(t.lcZ(41,17,"reservations.court")),t.xp6(2),t.Q6J("ngForOf",n.courts),t.xp6(2),t.Q6J("ngForOf",n.schedule),t.xp6(1),t.Q6J("ngIf",""!=n.error_message)}}function V(i,s){1&i&&(t.TgZ(0,"div",83),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"reservations.no_courts_created")," "))}function X(i,s){if(1&i&&(t.TgZ(0,"div",81),t.YNc(1,V,3,3,"div",82),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.schedule.length>0)}}function tt(i,s){if(1&i&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&i){const e=s.$implicit;t.xp6(1),t.Oqu(e)}}function et(i,s){if(1&i&&(t.TgZ(0,"ul"),t.YNc(1,tt,2,1,"li",59),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.message_errors)}}function ot(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",81)(1,"div",84)(2,"strong"),t._uU(3,"Error!"),t.qZA(),t._uU(4),t.TgZ(5,"button",85),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.cleanMessage())}),t._UZ(6,"span",86),t.qZA(),t.YNc(7,et,2,1,"ul",30),t.qZA()()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.error_message_popup," "),t.xp6(3),t.Q6J("ngIf",e.message_errors.length>0)}}function nt(i,s){if(1&i&&(t.TgZ(0,"div",81)(1,"div",87)(2,"strong"),t._uU(3,"Bien!"),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.susccess_message_popup," ")}}function it(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",88),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.addReservation())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"commun_translations.save")))}function st(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"button",95),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.closePopupShowReservation())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"reservations.cancel")))}function rt(i,s){if(1&i&&(t.TgZ(0,"div",89)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",8)(5,"div",16)(6,"h3"),t._uU(7),t.ALo(8,"translate"),t.qZA()()(),t.TgZ(9,"div",90)(10,"div",18)(11,"label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",91),t.qZA()(),t.TgZ(15,"div",90)(16,"div",18)(17,"label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",91),t.qZA()(),t.TgZ(21,"div",90)(22,"div",18)(23,"label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",91),t.qZA()(),t.TgZ(27,"div",92)(28,"div",18)(29,"label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",91),t.qZA()()(),t.TgZ(33,"div",22)(34,"div",23)(35,"a",33,93),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.YNc(39,st,3,3,"button",94),t.qZA()()()()()),2&i){const e=t.oxw(2);t.xp6(7),t.Oqu(t.lcZ(8,13,"reservations.booking_data")),t.xp6(5),t.Oqu(t.lcZ(13,15,"reservations.name")),t.xp6(2),t.hYB("value","",e.reservation.name," ",e.reservation.surname,""),t.xp6(4),t.Oqu(t.lcZ(19,17,"reservations.telephone")),t.xp6(2),t.s9C("value",e.reservation.mobile),t.xp6(4),t.Oqu(t.lcZ(25,19,"reservations.type")),t.xp6(2),t.s9C("value",e.reservation.type_name),t.xp6(4),t.Oqu(t.lcZ(31,21,"reservations.booking_time")),t.xp6(2),t.hYB("value","",e.reservation.start_time," - ",e.reservation.end_time,""),t.xp6(5),t.Oqu(t.lcZ(38,23,"commun_translations.close")),t.xp6(2),t.Q6J("ngIf",""==e.susccess_message_popup)}}function at(i,s){if(1&i&&(t.TgZ(0,"h3"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.AsE("",t.lcZ(2,2,"reservations.sure_to_cancel")," ",e.reservation.name,"?")}}function ct(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",81)(1,"div",84)(2,"strong"),t._uU(3,"Error!"),t.qZA(),t._uU(4),t.TgZ(5,"button",85),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.cleanMessage())}),t._UZ(6,"span",86),t.qZA()()()}if(2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.error_cancel_reservsation_message," ")}}function lt(i,s){if(1&i&&(t.TgZ(0,"div",81)(1,"div",87)(2,"strong"),t._uU(3,"Bien!"),t.qZA(),t._uU(4),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(4),t.hij(" ",e.success_cancel_reservsation_message," ")}}function _t(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),t.YNc(4,$,46,19,"div",10),t.YNc(5,X,2,1,"div",11),t.qZA()()(),t.TgZ(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",8)(11,"div",16)(12,"h3"),t._uU(13),t.ALo(14,"translate"),t.qZA()()(),t.TgZ(15,"div",17)(16,"div",18)(17,"label"),t._uU(18),t.ALo(19,"translate"),t.TgZ(20,"span",19),t._uU(21,"*"),t.qZA()(),t.TgZ(22,"input",20),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.email_reservation=n)}),t.qZA()()(),t.TgZ(23,"div",17)(24,"div",18)(25,"label"),t._uU(26),t.ALo(27,"translate"),t.TgZ(28,"span",19),t._uU(29,"*"),t.qZA()(),t.TgZ(30,"input",21),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.password_reservation=n)}),t.qZA()()()(),t.TgZ(31,"div",8),t.YNc(32,ot,8,2,"div",11),t.YNc(33,nt,5,1,"div",11),t.qZA(),t.TgZ(34,"div",22)(35,"div",23)(36,"a",24,25),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.closPopupCreateRervation())}),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,it,3,3,"button",26),t.qZA()()()()(),t.YNc(41,rt,40,25,"div",27),t.TgZ(42,"div",28)(43,"div",13)(44,"div",14)(45,"div",15),t._UZ(46,"img",29),t.YNc(47,at,3,4,"h3",30),t.TgZ(48,"div",17)(49,"div",18)(50,"label"),t._uU(51),t.ALo(52,"translate"),t.TgZ(53,"span",19),t._uU(54,"*"),t.qZA()(),t.TgZ(55,"input",31),t.NdJ("ngModelChange",function(n){t.CHM(e);const r=t.oxw();return t.KtG(r.password_cancel_reservation=n)}),t.qZA()()(),t.TgZ(56,"div",32)(57,"a",33,34),t._uU(59,"Cerrar"),t.qZA(),t.TgZ(60,"button",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.removeReservation())}),t._uU(61,"Borrar"),t.qZA()(),t.TgZ(62,"div",8),t.YNc(63,ct,7,1,"div",11),t.YNc(64,lt,5,1,"div",11),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(4),t.Q6J("ngIf",e.courts.length>0),t.xp6(1),t.Q6J("ngIf",""!=e.error_message&&0==e.courts.length),t.xp6(8),t.Oqu(t.lcZ(14,17,"reservations.create")),t.xp6(5),t.hij("",t.lcZ(19,19,"reservations.email")," "),t.xp6(4),t.Q6J("ngModel",e.email_reservation),t.xp6(4),t.hij("",t.lcZ(27,21,"reservations.password")," "),t.xp6(4),t.Q6J("ngModel",e.password_reservation),t.xp6(2),t.Q6J("ngIf",""!=e.error_message_popup),t.xp6(1),t.Q6J("ngIf",""!=e.susccess_message_popup),t.xp6(5),t.Oqu(t.lcZ(39,23,"commun_translations.close")),t.xp6(2),t.Q6J("ngIf",""==e.susccess_message_popup),t.xp6(1),t.Q6J("ngIf",e.reservation),t.xp6(6),t.Q6J("ngIf",e.reservation),t.xp6(4),t.hij("",t.lcZ(52,25,"reservations.password")," "),t.xp6(4),t.Q6J("ngModel",e.password_cancel_reservation),t.xp6(8),t.Q6J("ngIf",""!=e.error_cancel_reservsation_message),t.xp6(1),t.Q6J("ngIf",""!=e.success_cancel_reservsation_message)}}const dt=[{path:"",component:(()=>{const s=class{constructor(o,n,r,a,l,p){this.reservationSrv=o,this.activateRoute=n,this.clubDataSrv=r,this.router=a,this.translate=l,this.memberSrv=p,this.tab_selected="booking",this.WeekDays=[],this.routes=f._,this.hoursSelected=[],this.email_reservation="",this.password_reservation="",this.error_message_popup="",this.susccess_message_popup="",this.error_message="Para poder reservar tienes que seleccionar la menos 1.5h",this.day_name="",this.courts=[],this.all_courts=[],this.schedule_club=[],this.schedule=[],this.day_week_number="",this.loaded=!1,this.correctSchedule=!0,this.disableButtonReserve=!0,this.reservations=[],this.reservation_hours=[],this.club_reservations=[],this.reservation=[],this.message_errors=[],this.translations=[],this.sport_selected="padel",this.hasPadelCourts=!1,this.hasTennisCourts=!1,this.hasPickleballCourts=!1,this.hasSquashCourts=!1,this.hasBadmintonCourts=!1,this.type_reservations=[],this.potential_member_found=[],this.data_search_members={name:"",mobile:""},this.total_sport_clubs=0,this.can_edit=!1,this.pipe=new _.uU("en-US"),this.hash_club="",this.sport="",this.password_cancel_reservation="",this.error_cancel_reservsation_message="",this.success_cancel_reservsation_message="",this.major_sport=0}ngOnInit(){this.date=this.pipe.transform(new Date,"yyyy-MM-dd"),this.reserve_day=new Date,this.activateRoute.params.subscribe(n=>{this.date=n.date,this.hash_club=n.hash,this.sport=n.sport,this.sport_selected=n.sport,this.initializeLanguage()}),this.loaded=!1}loadFalse(){this.loaded=!1}initializeLanguage(){this.translate.use(this.reservationSrv.authSrv.language),this.translate.setDefaultLang(this.reservationSrv.authSrv.language),this.translate.get(["commun_translations","club_translations.schedule","reservations"]).subscribe(o=>{this.translations=o,this.WeekDays=[this.translations.commun_translations.day_1,this.translations.commun_translations.day_2,this.translations.commun_translations.day_3,this.translations.commun_translations.day_4,this.translations.commun_translations.day_5,this.translations.commun_translations.day_6,this.translations.commun_translations.day_7],this.getDayWeek(),this.getReservationsDay(),this.error_message=this.translations.reservations.notice_5,this.type_reservations["one-time"]=this.translations.reservations.type_one_time,this.type_reservations.recurrent=this.translations.reservations.type_recurrent,this.type_reservations["class-lessons"]=this.translations.reservations.type_lessons})}getReservationsDay(){let o=this.getSportSelectedId();this.clubDataSrv.config(this.hash_club,this.day_week_number,this.date,o).subscribe(n=>{200==n.message&&(this.total_sport_clubs=n.total_types_sport,this.loaded=!0,this.courts=n.courts,this.all_courts=n.all_courts,this.schedule=n.finalScheduleHours,this.reservations=n.reservations,this.major_sport=n.major_sport,this.configureHoursReserve(),this.typeOfCourtsClub())})}scrollToBottom(){window.scrollTo(0,window.document.body.scrollHeight-window.innerHeight)}configureHoursReserve(){this.reservations.forEach(o=>{this.schedule.forEach(n=>{o.schedule_id==n.id&&n.courts.forEach(r=>{o.court_id==r.id&&(r.reservation_id=o.reservation_id,r.reservation_name=o.reservation_name,r.reservation_schedule=o.start_time+"-"+o.end_time,r.is_recurrent=o.recurrent,r.type=o.type)})})});for(let o=1;o<this.schedule.length;o++)for(let n=0;n<this.schedule[o].courts.length;n++)this.schedule[o-1].courts[n].reservation_id&&this.schedule[o].courts[n].reservation_id==this.schedule[o-1].courts[n].reservation_id&&(this.schedule[o].courts[n].reservation_name="",this.schedule[o].courts[n].reservation_schedule="")}getDayWeek(){this.date_format=this.pipe.transform(this.date,"dd-MM-yyyy"),this.date_reservation=new Date(this.date).toISOString(),this.reserve_day=new Date(this.date);let o=this.reserve_day.getDay();0==o&&(o=7),this.day_week_number="day_"+o,this.day_name=this.WeekDays[o-1]}lessDay(){this.hoursSelected=[];let o=new Date(this.date);o.setDate(o.getDate()-1),this.date=this.pipe.transform(o,"yyyy-MM-dd"),this.router.navigate(["/club/booking",this.sport_selected,this.hash_club,this.date]),this.reserve_day=new Date(this.date)}moreDay(){this.hoursSelected=[];let o=new Date(this.date);o.setDate(o.getDate()+1),this.date=this.pipe.transform(o,"yyyy-MM-dd"),this.router.navigate(["/club/booking",this.sport_selected,this.hash_club,this.date]),this.reserve_day=new Date(this.date)}changeDateReservations(o){this.hoursSelected=[],this.date=this.pipe.transform(this.date_reservation,"yyyy-MM-dd"),this.reserve_day=new Date(this.date),this.getDayWeek(),this.getReservationsDay()}selectHour(o,n){var r=document.getElementById(o.id+"_"+n);let a=this.hoursSelected.findIndex(l=>l.court==n&&l.schedule_id==o.id);-1!=a?(this.hoursSelected.splice(a,1),r&&r.classList.remove("color-red-first")):(this.hoursSelected.push({court:n,schedule_id:o.id,hour_start:o.format_hour_start,hour_end:o.format_hour_end}),r&&r.classList.add("color-red-first")),this.checkCorrectHours()}cleanMessage(){this.error_message_popup="",this.message_errors=[],this.error_cancel_reservsation_message=""}openPopup(){this.potential_member_found=[],this.susccess_message_popup="",this.email_reservation="",this.password_reservation="",this.password_cancel_reservation="",this.cleanMessage()}addReservation(){if(""==this.email_reservation||""==this.password_reservation||0==this.hoursSelected.length)return void(this.error_message_popup=this.translations.reservations.error_5);if(this.email_reservation&&this.email_reservation.length>191)return void(this.error_message_popup=this.translations.reservations.error_2);if(this.password_reservation&&this.password_reservation.length>50)return void(this.error_message_popup=this.translations.reservations.error_2);if(this.hoursSelected&&this.hoursSelected.length<2)return void(this.error_message_popup=this.translations.reservations.error_4);let o=new FormData;o.append("hash_club",this.hash_club),o.append("court_id",this.court_selected),o.append("email",this.email_reservation),o.append("password",this.password_reservation);let n=this.hoursSelected.length;o.append("day_week_number",this.day_week_number),o.append("start_time",this.hoursSelected[0].hour_start),o.append("end_time",this.hoursSelected[n-1].hour_end),o.append("date",this.date),o.append("hours_selected",JSON.stringify(this.hoursSelected)),this.clubDataSrv.storeReservation(o).subscribe(r=>{200==r.message?(this.hoursSelected.forEach(a=>{this.reservations.push({court_id:a.court,reservation_id:r.reservation_id,reservation_name:this.email_reservation,schedule_id:a.schedule_id})}),this.hoursSelected=[],this.disableButtonReserve=!0,this.susccess_message_popup=this.translations.commun_translations.data_save_correctly,this.error_message=this.translations.reservations.error_4):422==r.message?(this.error_message=this.translations.commun_translations.data_save_error,this.message_errors=r.errors_text):this.error_message=this.translations.commun_translations.data_save_error+" "+this.translations.commun_translations.consult_admin})}showReserve(o){this.clubDataSrv.getBooking(o).subscribe(n=>{200==n.message&&(this.reservation=n.reservation,this.reservation.type_name=this.type_reservations[n.reservation.type])})}closPopupCreateRervation(){document.location.reload()}checkCorrectHours(){for(let o=0;o<this.hoursSelected.length-1;o++)if(this.court_selected=this.hoursSelected[o].court,this.hoursSelected[o+1].court!=this.hoursSelected[o].court)return this.error_message=this.translations.reservations.notice_1,this.court_selected=null,void(this.disableButtonReserve=!0);if(this.hoursSelected.length>2&&this.hoursSelected.length<5&&(this.hoursSelected=this.hoursSelected.sort((o,n)=>o.schedule_id<n.schedule_id?-1:1),this.error_message="",this.disableButtonReserve=!1),this.hoursSelected.length>4)return this.error_message=this.translations.reservations.notice_2,void(this.disableButtonReserve=!0);if(this.hoursSelected.length<2)return this.error_message=this.translations.reservations.notice_5,void(this.disableButtonReserve=!0);this.hoursSelected=this.hoursSelected.sort((o,n)=>o.schedule_id<n.schedule_id?-1:1);for(let o=0;o<this.hoursSelected.length-1;o++)if(this.hoursSelected[o+1].schedule_id-this.hoursSelected[o].schedule_id!=1)return this.error_message=this.translations.reservations.notice_4,void(this.disableButtonReserve=!0)}closePopupShowReservation(){this.closeShowbutton.nativeElement.click()}removeReservation(){if(""==this.password_cancel_reservation)return void(this.error_cancel_reservsation_message=this.translations.reservations.error_6);if(this.password_cancel_reservation&&this.password_cancel_reservation.length>50)return void(this.error_cancel_reservsation_message=this.translations.reservations.error_2);let o=new FormData;o.append("reservation_id",this.reservation.id),o.append("password",this.password_cancel_reservation),this.clubDataSrv.cancelBooking(o).subscribe(n=>{if(200==n.message){let r=[];for(let a=0;a<this.reservations.length;a++)this.reservations[a].reservation_id===this.reservation.id&&(r.push(this.reservations[a]),this.reservations.splice(a--,1));r.forEach(a=>{this.schedule.forEach(l=>{a.schedule_id==l.id&&l.courts.forEach(p=>{a.court_id==p.id&&(p.reservation_id=null,p.reservation_name=null)})})}),this.closebuttonDeleteReservation.nativeElement.click()}else console.log(n)})}typeOfCourtsClub(){this.all_courts.some(o=>{1==o.sport_type&&(this.hasPadelCourts=!0),2==o.sport_type&&(this.hasTennisCourts=!0),3==o.sport_type&&(this.hasPickleballCourts=!0),4==o.sport_type&&(this.hasSquashCourts=!0),5==o.sport_type&&(this.hasBadmintonCourts=!0)})}getSportSelectedId(){let o=this.major_sport;switch(this.sport_selected){case"padel":default:o=1;break;case"tennis":o=2;break;case"pickleball":o=3;break;case"squash":o=4;break;case"badminton":o=5}return o}};let i=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(b.E),t.Y36(d.gz),t.Y36(x.E),t.Y36(d.F0),t.Y36(v.sK),t.Y36(k.Z))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-booking"]],viewQuery:function(n,r){if(1&n&&(t.Gf(w,5),t.Gf(y,5),t.Gf(T,5)),2&n){let a;t.iGM(a=t.CRH())&&(r.closebutton=a.first),t.iGM(a=t.CRH())&&(r.closeShowbutton=a.first),t.iGM(a=t.CRH())&&(r.closebuttonDeleteReservation=a.first)}},decls:7,vars:1,consts:[["id","home",1,"main-wrapper"],[1,"hero-section","auto-height","text-center"],[1,"container"],[1,"profile-tabs"],[1,"tab-content"],["class","tab-pane show active","id","booking",4,"ngIf"],["id","booking",1,"tab-pane","show","active"],[1,"good-morning-blk"],[1,"row"],[1,"col-12"],["class","morning-user text-center",4,"ngIf"],["class","col-md-12 my-4",4,"ngIf"],["id","add_schedule","role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],[1,"col-12","col-md-12","col-xl-12"],[1,"col-12","col-md-12","col-xl-12","my-4","text-center"],[1,"form-group","local-forms"],[1,"login-danger"],["name","name_schedule","type","text",1,"form-control",3,"ngModel","ngModelChange"],["name","password_reservation","type","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","my-2","center"],[1,"m-t-20","text-center"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1",3,"click"],["closebuttonAddShedule",""],["type","submit","style","width: auto;","class","btn btn-primary text-white",3,"click",4,"ngIf"],["id","show_reservation","class","modal fade delete-modal","role","dialog",4,"ngIf"],["id","delete_reservation","role","dialog",1,"modal","fade","delete-modal"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],["name","password_cancel_reservation","type","password",1,"form-control",3,"ngModel","ngModelChange"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["closebuttonDeleteReservation",""],["type","submit",1,"btn","btn-danger",3,"click"],[1,"morning-user","text-center"],[1,"row","hide-desktop","test"],[1,"col-3","text-start"],["href","javascript:void(0);",1,"btn","trash",3,"click"],[1,"icon","fa","fa-long-arrow-left","ms-2"],[1,"col-6","center"],["type","text","matInput","","name","date_reservation",1,"form-control","datetimepicker",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["picker_mobile",""],["matIconSuffix","",3,"for"],[1,"col-2"],[1,"icon","fa","fa-long-arrow-right","ms-2"],[1,"row","hide-mobile"],[1,"col-5","text-end"],[1,"col-2","center"],["picker",""],[1,"col-5","text-start"],["class","col-12",4,"ngIf"],[1,"card-block"],["class","fabs ","role","group","aria-label","Floating action buttons",4,"ngIf"],[1,"table-responsive"],[1,"table","mb-0"],[1,"table-secondary",2,"width","70px !important"],["class","table-secondary",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],["class","nav-item ",3,"ngClass",4,"ngIf"],["class","nav-item",3,"ngClass",4,"ngIf"],[1,"nav-item",3,"ngClass"],[1,"nav-link",3,"routerLink","click"],[3,"routerLink","click"],["role","group","aria-label","Floating action buttons",1,"fabs"],["class","btn btn-sm btn-primary","data-bs-toggle","modal","data-bs-target","#add_schedule",3,"disabled","click",4,"ngIf"],["class","btn btn-sm btn-primary disabled-button-color",3,"click",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#add_schedule",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"btn","btn-sm","btn-primary","disabled-button-color",3,"click"],[1,"table-secondary"],[1,"table-primary"],["class"," border-td",3,"id","click",4,"ngIf"],["class","color-gray border-td",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#show_reservation",3,"ngClass","click",4,"ngIf"],[1,"border-td",3,"id","click"],[1,"color-gray","border-td"],["data-bs-toggle","modal","data-bs-target","#show_reservation",3,"ngClass","click"],[1,"booking-name"],[1,"col-md-12","my-4"],["class","alert alert-warning alert-dismissible fade show text-center","role","alert",4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show","text-center"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],["type","submit",1,"btn","btn-primary","text-white",2,"width","auto",3,"click"],["id","show_reservation","role","dialog",1,"modal","fade","delete-modal"],[1,"col-6","col-md-6","col-xl-12","my-4","text-center"],["type","text",1,"form-control",3,"value"],[1,"col-3","col-md-3","col-xl-6","my-6","text-center"],["closebuttonShowhedule",""],["type","submit","style","width: auto;","class","btn btn-danger text-white","href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_reservation",3,"click",4,"ngIf"],["type","submit","href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_reservation",1,"btn","btn-danger","text-white",2,"width","auto",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-club-info"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4),t.YNc(6,_t,65,27,"div",5),t.qZA()()()()()),2&n&&(t.xp6(6),t.Q6J("ngIf","booking"==r.tab_selected))},dependencies:[_.mk,_.sg,_.O5,d.rH,h.Mq,h.hl,h.nW,C.R9,g.Fj,g.JJ,g.On,Z.o,_.OU,v.X$],styles:["table[_ngcontent-%COMP%]{width:100%;display:table;table-layout:fixed;border-collapse:collapse}td[_ngcontent-%COMP%]{display:table-cell;text-align:center;vertical-align:middle;word-wrap:break-word}th[_ngcontent-%COMP%]{text-align:center;border:none}.color-gray[_ngcontent-%COMP%]{background-color:gray!important;border:none}h3[_ngcontent-%COMP%]{color:#c9bdbd}p[_ngcontent-%COMP%]{text-align:left;color:#3f4f84;font-size:14px;font-weight:700;margin-bottom:0;text-transform:uppercase}.color-red[_ngcontent-%COMP%]{background-color:#ffd3b6;border-top:none;border-bottom:none;cursor:pointer}.reservation_schedule[_ngcontent-%COMP%]{text-align:left;color:#213d90!important;font-size:12px!important;margin-left:20px}.recurrent-booking[_ngcontent-%COMP%]{border-left:3px solid #f6f4f4!important;background-color:#ffd1d3;border-bottom:none;cursor:pointer}.recurrent-booking-first[_ngcontent-%COMP%]{border-left:3px solid #f6f4f4!important;border-top:3px solid #f6f4f4!important;background-color:#ffd1d3;border-bottom:none;cursor:pointer}.border-td[_ngcontent-%COMP%]{padding:10px;border:3px solid #f6f4f4;border-collapse:collapse;background-color:#fff;cursor:pointer}.one-time-booking[_ngcontent-%COMP%]{background-color:#98affc;border-top:none;border-bottom:none;border-right:3px solid #f6f4f4!important;border-left:3px solid #f6f4f4!important;cursor:pointer}.one-time-booking-first[_ngcontent-%COMP%]{border-left:3px solid #f6f4f4!important;border-top:3px solid #f6f4f4!important;background-color:#98affc;border-bottom:none;cursor:pointer}.class-lesson-booking[_ngcontent-%COMP%]{background-color:#f5e5c8;border-top:none;border-bottom:none;border-right:3px solid #f6f4f4!important;border-left:3px solid #f6f4f4!important;cursor:pointer}.class-lesson-booking-first[_ngcontent-%COMP%]{border-left:3px solid #f6f4f4!important;border-right:3px solid #f6f4f4!important;border-top:3px solid #f6f4f4!important;background-color:#f5e5c8;border-bottom:none;cursor:pointer}.recurrent-booking[_ngcontent-%COMP%]{background-color:#fbcfd2;border-top:none;border-bottom:none;border-right:3px solid #f6f4f4!important;border-left:3px solid #f6f4f4!important;cursor:pointer}.recurrent-booking-first[_ngcontent-%COMP%]{border-left:3px solid #f6f4f4!important;border-top:3px solid #f6f4f4!important;background-color:#fbcfd2;border-bottom:none;cursor:pointer}.color-red-first[_ngcontent-%COMP%]{background-color:#ffd3b6;border-bottom:none;cursor:pointer}.top-border[_ngcontent-%COMP%]{border-top:3px solid #f6f4f4}@media screen and (max-width: 800px){p[_ngcontent-%COMP%]{font-size:15px}.reservation_schedule[_ngcontent-%COMP%]{margin-left:2px;font-size:12px!important;display:block}}@media screen and (max-width: 480px){.hide-mobile[_ngcontent-%COMP%]{display:none!important}}@media screen and (min-width: 481px){.hide-desktop[_ngcontent-%COMP%]{display:none!important}}h2[_ngcontent-%COMP%]{color:gray}.morning-user[_ngcontent-%COMP%]{padding:20px 0 20px 35px}.morning-user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .card-block[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#c9bdbd;font-size:20px;font-weight:400}.card-title[_ngcontent-%COMP%]{margin-bottom:.125rem}input[_ngcontent-%COMP%]{color:#c9bdbd;font-size:17px;font-weight:400}.icon[_ngcontent-%COMP%]{align-items:center;height:42px;width:46px;display:flex;justify-content:center;-webkit-justify-content:center;-ms-flex-pack:center;background-color:#eee;color:#333548;position:relative;font-size:16px;margin-left:6px}.background_yellow[_ngcontent-%COMP%]{background-color:#ffed00!important;color:#424242!important;font-weight:700!important}.background_yellow_light[_ngcontent-%COMP%]{background-color:#efe88e!important;color:#424242!important;font-weight:700!important}.background_yellow_light[_ngcontent-%COMP%]:hover{background-color:#ffed00!important;color:#424242!important;font-weight:700!important}li[_ngcontent-%COMP%]{cursor:pointer}.fabs[_ngcontent-%COMP%]{--_viewport-margin: 2.5vmin;position:fixed;z-index:100;inset-block:auto var(--_viewport-margin);inset-inline:auto var(--_viewport-margin)}.disabled-button-color[_ngcontent-%COMP%]{background-color:#5da3fb}.occupied-court[_ngcontent-%COMP%]{background-color:#f4c1c4}.booking-name[_ngcontent-%COMP%]{text-align:left;color:#3f4f84!important;font-size:14px!important;font-weight:700!important;margin-bottom:0!important}@media (max-width: 482px){#home[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px!important;line-height:normal;font-weight:lighter!important}}"]}),i})()}];let ut=(()=>{const s=class{};let i=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.Bz.forChild(dt),d.Bz]}),i})();var pt=c(5108);let ht=(()=>{const s=class{};let i=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[_.ez,ut,pt.m]}),i})()}}]);