"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[4913],{7240:(b,v,g)=>{g.d(v,{Z:()=>T});var h=g(529),c=g(5862),t=g(4650),Z=g(866);let T=(()=>{const p=class{constructor(o,i){this.http=o,this.authSrv=i}listTournaments(o=1,i=""){let u=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/tournaments?page="+o+"&search="+i,{headers:u})}listRoles(){let o=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/staffs/roles",{headers:o})}storeTournament(o){console.log(o);let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/tournaments",o,{headers:i})}deleteTournament(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.delete(c.$g+"/tournaments/"+o,{headers:i})}getTournament(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/tournaments/"+o,{headers:i})}editTournament(o,i){let u=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/tournaments/update/"+o,i,{headers:u})}getDraw(o,i){let u=new h.WM({Authorization:"Bearer "+this.authSrv.token}),m=c.$g+"/tournaments/get-draw/"+o+"/"+i;return console.log(m),this.http.get(m,{headers:u})}getMatch(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/tournaments/get-match-data/"+o,{headers:i})}saveResult(o,i){let u=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/tournaments/save-result/"+o,i,{headers:u})}updateScheduleMatch(o,i){let u=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/tournaments/update-schedule-match/"+o,i,{headers:u})}saveSchedule(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/tournament-schedule",o,{headers:i})}deleteSchedule(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.delete(c.$g+"/tournament-schedule/"+o,{headers:i})}saveScheduleCouple(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.post(c.$g+"/couple-tournament-schedule",o,{headers:i})}deleteScheduleCouple(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.delete(c.$g+"/couple-tournament-schedule/"+o,{headers:i})}getClasification(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/tournaments/clasification/"+o,{headers:i})}getMatchsSimpleLeague(o){let i=new h.WM({Authorization:"Bearer "+this.authSrv.token});return this.http.get(c.$g+"/tournaments/get-matches-simple-league/"+o,{headers:i})}};let f=p;return p.\u0275fac=function(i){return new(i||p)(t.LFG(h.eN),t.LFG(Z.e))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),f})()},4913:(b,v,g)=>{g.r(v),g.d(v,{TournamentModule:()=>I});var h=g(6895),c=g(27),t=g(4650);let Z=(()=>{const r=class{};let s=r;return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-tournament"]],decls:1,vars:0,template:function(n,e){1&n&&t._UZ(0,"router-outlet")},dependencies:[c.lC]}),s})();var T=g(671),f=g(6382),p=g(7945),L=g(7240),o=g(2466),i=g(4006),u=g(6308);const m=["closebutton"],k=function(s){return["edit",s]};function x(s,r){if(1&s&&(t.TgZ(0,"a",68),t._UZ(1,"i",69),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&s){const l=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(4,k,l.id)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"commun_translations.view"),"")}}const S=function(s){return["/tournament/data",s,1]};function C(s,r){if(1&s&&(t.TgZ(0,"a",68),t._UZ(1,"i",70),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&s){const l=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(4,S,l.id)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"commun_translations.edit"),"")}}function y(s,r){if(1&s){const l=t.EpF();t.TgZ(0,"a",71),t.NdJ("click",function(){t.CHM(l);const n=t.oxw().$implicit,e=t.oxw();return t.KtG(e.selectLeague(n))}),t._UZ(1,"i",72),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&s&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"commun_translations.remove"),""))}const P=function(s,r){return{"status-pink":s,"status-green":r}};function w(s,r){if(1&s&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td",59)(8,"button",60),t._uU(9),t.qZA()(),t.TgZ(10,"td",61)(11,"div",62)(12,"a",63),t._UZ(13,"i",64),t.qZA(),t.TgZ(14,"div",65),t.YNc(15,x,4,6,"a",66),t.YNc(16,C,4,6,"a",66),t.YNc(17,y,4,3,"a",67),t.qZA()()()()),2&s){const l=r.$implicit,a=t.oxw();t.xp6(2),t.Oqu(l.name),t.xp6(2),t.Oqu(a.kind_sport[l.sport_type].name),t.xp6(2),t.Oqu(l.start_date),t.xp6(2),t.Q6J("ngClass",t.WLB(8,P,l.matchs_finished>0,1==l.tournament_open||"1"==l.draw_generated)),t.xp6(1),t.Oqu(l.status),t.xp6(6),t.Q6J("ngIf",0==a.hasPermission("edit_league")&&a.hasPermission("list_league")),t.xp6(1),t.Q6J("ngIf",a.hasPermission("edit_league")),t.xp6(1),t.Q6J("ngIf",a.hasPermission("delete_league"))}}function U(s,r){if(1&s){const l=t.EpF();t.TgZ(0,"li",74),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.moveToPage(n.currentPage-2))}),t.TgZ(1,"a",75),t._uU(2," ... "),t.qZA()()}if(2&s){const l=t.oxw(2);t.Q6J("hidden",1===l.currentPage)}}function D(s,r){if(1&s){const l=t.EpF();t.TgZ(0,"li",74),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.moveToPage(n.currentPage+2))}),t.TgZ(1,"a",75),t._uU(2," ... "),t.qZA()()}if(2&s){const l=t.oxw(2);t.Q6J("hidden",l.currentPage>=l.pageNumberArray[l.pageNumberArray.length-2]||l.totalData<l.serialNumberArray[l.serialNumberArray.length-1])}}function M(s,r){if(1&s){const l=t.EpF();t.ynx(0),t.TgZ(1,"li",46)(2,"a",48),t.NdJ("click",function(){const e=t.CHM(l).$implicit,d=t.oxw();return t.KtG(d.moveToPage(e))}),t._uU(3),t.qZA()(),t.YNc(4,U,3,1,"li",73),t.YNc(5,D,3,1,"li",73),t.BQk()}if(2&s){const l=r.$implicit,a=r.index,n=t.oxw();t.xp6(1),t.ekj("active",l===n.currentPage),t.Q6J("ngClass",n.pageNumberArray[n.currentPage-2]>l&&1!==l&&n.pageNumberArray.length>6||n.pageNumberArray[n.currentPage]<l&&1!==l&&n.pageNumberArray.length>6&&n.pageNumberArray.length!==l?"hide-page-no":"show-page-no"),t.xp6(2),t.hij(" ",l," "),t.xp6(1),t.Q6J("ngIf",0===a&&n.pageNumberArray.length>6&&n.currentPage>2),t.xp6(1),t.Q6J("ngIf",a===n.pageNumberArray.length-2&&n.pageNumberArray.length>6)}}function N(s,r){if(1&s&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&s){const l=t.oxw();t.xp6(1),t.hij("Est\xe1s seguro de borrar esta liga: ",l.tournament_selected.name,"?")}}const A=function(s){return{disabled:s}},q=[{path:"",component:Z,children:[{path:"list-tournament",component:(()=>{const r=class{constructor(a,n,e){this.data=a,this.tournamentSrv=n,this.translate=e,this.routes=f._,this.tournamentsList=[],this.showFilter=!1,this.searchDataValue="",this.lastIndex=0,this.pageSize=20,this.totalData=0,this.skip=0,this.limit=this.pageSize,this.pageIndex=0,this.serialNumberArray=[],this.currentPage=1,this.pageNumberArray=[],this.pageSelection=[],this.totalPages=0,this.tournaments_general=[],this.statusText="",this.kind_sport=[],this.translations=[]}ngOnInit(){this.initializeLanguage(),this.user=this.tournamentSrv.authSrv.user,this.getTableData()}getTableData(a=1,n=""){this.tournamentsList=[],this.serialNumberArray=[],this.tournamentSrv.listTournaments(a,this.searchDataValue).subscribe(e=>{this.totalData=e.total,this.tournamentsList=e.tournaments,this.getTextStatus(e.match_finished,e.match_pending),this.tournaments_general=e.tournaments,this.getTableDataGeneral(),this.dataSource=new T.by(this.tournamentsList),this.calculateTotalPages(this.totalData,this.pageSize)})}getTextStatus(a,n){this.tournamentsList.forEach(e=>{1==e.tournament_open?e.status=1==e.is_draft?this.translations.leagues.in_draft:this.translations.leagues.preregistrations:(e.matchs_finished>0&&0==e.matchs_pending?e.status=this.translations.leagues.finished:(e.matchs_finished>0&&e.matchs_pending>0||"1"==e.draw_generated)&&(e.status=this.translations.leagues.in_play),e.match_pending>0&&(e.status=this.translations.leagues.preregistrations))})}initializeLanguage(){this.translate.use(this.tournamentSrv.authSrv.language),this.translate.setDefaultLang(this.tournamentSrv.authSrv.language),this.translate.get(["commun_translations","leagues","club_translations"]).subscribe(a=>{this.translations=a,this.getTypeSports()})}hasPermission(a=""){return!(!this.user.role.includes("Super-Admin")&&!this.user.permissions.includes(a))}getTableDataGeneral(){new h.uU("en-US"),this.tournamentsList=[],this.serialNumberArray=[],this.tournaments_general.map((n,e)=>{const d=e+1;e>=this.skip&&d<=this.limit&&(this.tournamentsList.push(n),this.serialNumberArray.push(d))}),this.dataSource=new T.by(this.tournamentsList),this.calculateTotalPages(this.totalData,this.pageSize)}searchData(a){this.dataSource.filter=a.trim().toLowerCase(),this.getTableData(this.currentPage,this.searchDataValue)}sortData(a){const n=this.tournamentsList.slice();this.tournamentsList=a.active&&""!==a.direction?n.sort((e,d)=>(e[a.active]<d[a.active]?-1:1)*("asc"===a.direction?1:-1)):n}getMoreData(a){"next"==a?(this.currentPage++,this.pageIndex=this.currentPage-1,this.limit+=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage)):"previous"==a&&(this.currentPage--,this.pageIndex=this.currentPage-1,this.limit-=this.pageSize,this.skip=this.pageSize*this.pageIndex,this.getTableData(this.currentPage))}moveToPage(a){this.currentPage=a,this.skip=this.pageSelection[a-1].skip,this.limit=this.pageSelection[a-1].limit,a>this.currentPage?this.pageIndex=a-1:a<this.currentPage&&(this.pageIndex=a+1),this.getTableData(this.currentPage)}refresh(){this.pageSelection=[],this.searchDataValue="",this.limit=this.pageSize,this.skip=0,this.currentPage=1,this.getTableData()}calculateTotalPages(a,n){this.pageNumberArray=[],this.totalPages=a/n,this.totalPages%1!=0&&(this.totalPages=Math.trunc(this.totalPages+1));for(var e=1;e<=this.totalPages;e++){const d=n*e,_=d-n;this.pageNumberArray.push(e),this.pageSelection.push({skip:_,limit:d})}}selectLeague(a){this.tournament_selected=a}removeLeague(){this.tournamentSrv.deleteTournament(this.tournament_selected.id).subscribe(a=>{if(200==a.message){let n=this.tournamentsList.findIndex(e=>e.id==this.tournament_selected.id);-1!=n&&(this.tournamentsList.splice(n,1),this.closebutton.nativeElement.click(),this.tournament_selected=null)}else console.log(a)})}getTypeSports(){this.kind_sport.push({id:0,name:"..."},{id:1,name:this.translations.club_translations.sport_1},{id:2,name:this.translations.club_translations.sport_2},{id:3,name:this.translations.club_translations.sport_3},{id:4,name:this.translations.club_translations.sport_4},{id:5,name:this.translations.club_translations.sport_5})}};let s=r;return r.\u0275fac=function(n){return new(n||r)(t.Y36(p.D),t.Y36(L.Z),t.Y36(o.sK))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-list-tournament"]],viewQuery:function(n,e){if(1&n&&t.Gf(m,5),2&n){let d;t.iGM(d=t.CRH())&&(e.closebutton=d.first)}},decls:90,vars:35,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["href","#"],[1,"feather","icon-chevron-right"],[1,"breadcrumb-item","active"],[1,"card","card-table","show-entire"],[1,"card-body"],[1,"page-table-header","mb-2"],[1,"row","align-items-center"],[1,"col"],[1,"doctor-table-blk"],[1,"doctor-search-blk"],[1,"top-nav-search","table-search-blk"],["placeholder","Search here",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn"],["src","assets/img/icons/search-normal.svg","alt",""],[1,"add-group"],["routerLinkActive","router-link-active",1,"btn","btn-primary","add-pluss","ms-2",3,"routerLink"],["src","assets/img/icons/plus.svg","alt",""],["href","javascript:;",1,"btn","btn-primary","doctor-refresh","ms-2",3,"click"],["src","assets/img/icons/re-fresh.svg","alt",""],[1,"col-auto","text-end","float-end","ms-auto","download-grp"],["href","javascript:;",1,"me-2"],["src","assets/img/icons/pdf-icon-01.svg","alt",""],["src","assets/img/icons/pdf-icon-02.svg","alt",""],["src","assets/img/icons/pdf-icon-03.svg","alt",""],["href","javascript:;"],["src","assets/img/icons/pdf-icon-04.svg","alt",""],[1,"table-responsive"],["matSort","",1,"table","border-0","custom-table","comman-table","datatable","mb-0",3,"matSortChange"],["mat-sort-header","name"],["mat-sort-header","type_sportt"],["mat-sort-header","joining_date"],["mat-sort-header","status"],[4,"ngFor","ngForOf"],[1,"table_footer"],[1,"col-sm-12","col-md-5"],[1,"dataTables_info"],[1,"col-sm-12","col-md-7"],[1,"pagination_section"],[1,"pagination"],[1,"page-item",3,"ngClass"],["href","javascript:void(0);","tabindex","-1",1,"page-link",3,"click"],["href","javascript:void(0);",1,"page-link",3,"click"],["id","delete_staff_modal","role","dialog",1,"modal","fade","delete-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-body","text-center"],["src","assets/img/sent.png","alt","","width","50","height","46"],[4,"ngIf"],[1,"m-t-20"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-white","me-1"],["closebutton",""],["type","submit",1,"btn","btn-danger",3,"click"],[1,"text-start"],[1,"custom-badge",3,"ngClass"],[1,"text-end"],[1,"dropdown","dropdown-action"],["href","javascript:void(0);","data-bs-toggle","dropdown","aria-expanded","false",1,"action-icon","dropdown-toggle"],[1,"fa","fa-ellipsis-v"],[1,"dropdown-menu","dropdown-menu-end"],["class","dropdown-item","href","#",3,"routerLink",4,"ngIf"],["class","dropdown-item","href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_staff_modal",3,"click",4,"ngIf"],["href","#",1,"dropdown-item",3,"routerLink"],[1,"fa-solid","fa-eye","m-r-5"],[1,"fa-solid","fa-pen-to-square","m-r-5"],["href","#","onclick","return false;","data-bs-toggle","modal","data-bs-target","#delete_staff_modal",1,"dropdown-item",3,"click"],[1,"fa","fa-trash-alt","m-r-5"],["class","page-item",3,"hidden","click",4,"ngIf"],[1,"page-item",3,"hidden","click"],["href","javascript:void(0);",1,"page-link"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6)(7,"a",7),t._uU(8),t.ALo(9,"translate"),t.qZA()(),t.TgZ(10,"li",6),t._UZ(11,"i",8),t.qZA(),t.TgZ(12,"li",9),t._uU(13),t.ALo(14,"translate"),t.qZA()()()()(),t.TgZ(15,"div",3)(16,"div",4)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"h3"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"div",16)(27,"div",17)(28,"input",18),t.NdJ("ngModelChange",function(_){return e.searchDataValue=_})("ngModelChange",function(){return e.searchData(e.searchDataValue)}),t.qZA(),t.TgZ(29,"a",19),t._UZ(30,"img",20),t.qZA()(),t.TgZ(31,"div",21)(32,"a",22),t._UZ(33,"img",23),t.qZA(),t.TgZ(34,"a",24),t.NdJ("click",function(){return e.refresh()}),t._UZ(35,"img",25),t.qZA()()()()(),t.TgZ(36,"div",26)(37,"a",27),t._UZ(38,"img",28),t.qZA(),t.TgZ(39,"a",27),t._UZ(40,"img",29),t.qZA(),t.TgZ(41,"a",27),t._UZ(42,"img",30),t.qZA(),t.TgZ(43,"a",31),t._UZ(44,"img",32),t.qZA()()()(),t.TgZ(45,"div",33)(46,"table",34),t.NdJ("matSortChange",function(_){return e.sortData(_)}),t.TgZ(47,"thead")(48,"tr")(49,"th",35),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.TgZ(52,"th",36),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"th",37),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"th",38),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._UZ(61,"th"),t.qZA()(),t.TgZ(62,"tbody"),t.YNc(63,w,18,11,"tr",39),t.qZA()(),t.TgZ(64,"div",40)(65,"div",41)(66,"div",42),t._uU(67),t.qZA()(),t.TgZ(68,"div",43)(69,"div",44)(70,"ul",45)(71,"li",46)(72,"a",47),t.NdJ("click",function(){return e.getMoreData("previous")}),t._uU(73,"Previous"),t.qZA()(),t.YNc(74,M,6,6,"ng-container",39),t.TgZ(75,"li",46)(76,"a",48),t.NdJ("click",function(){return e.getMoreData("next")}),t._uU(77,"Next "),t.qZA()()()()()()()()()()()()(),t.TgZ(78,"div",49)(79,"div",50)(80,"div",51)(81,"div",52),t._UZ(82,"img",53),t.YNc(83,N,2,1,"h3",54),t.TgZ(84,"div",55)(85,"a",56,57),t._uU(87,"Cerrar"),t.qZA(),t.TgZ(88,"button",58),t.NdJ("click",function(){return e.removeLeague()}),t._uU(89,"Borrar"),t.qZA()()()()()()),2&n&&(t.xp6(8),t.hij("",t.lcZ(9,17,"tournaments.tournament")," "),t.xp6(5),t.Oqu(t.lcZ(14,19,"commun_translations.list")),t.xp6(11),t.Oqu(t.lcZ(25,21,"tournaments.tournaments_list")),t.xp6(4),t.Q6J("ngModel",e.searchDataValue),t.xp6(4),t.Q6J("routerLink",e.routes.addTournament),t.xp6(18),t.Oqu(t.lcZ(51,23,"leagues.name")),t.xp6(3),t.Oqu(t.lcZ(54,25,"club_translations.sport")),t.xp6(3),t.Oqu(t.lcZ(57,27,"leagues.day_start")),t.xp6(3),t.Oqu(t.lcZ(60,29,"leagues.status")),t.xp6(4),t.Q6J("ngForOf",e.tournamentsList),t.xp6(4),t.lnq(" Showing ",e.serialNumberArray[0]," to ",e.serialNumberArray[e.serialNumberArray.length-1]," of ",e.totalData," entries "),t.xp6(4),t.Q6J("ngClass",t.VKq(31,A,1===e.currentPage)),t.xp6(3),t.Q6J("ngForOf",e.pageNumberArray),t.xp6(1),t.Q6J("ngClass",t.VKq(33,A,e.currentPage===e.pageNumberArray[e.pageNumberArray.length-1]||0===e.tournamentsList.length)),t.xp6(8),t.Q6J("ngIf",e.tournament_selected))},dependencies:[h.mk,h.sg,h.O5,c.rH,c.Od,i.Fj,i.JJ,i.On,u.YE,u.nU,o.X$]}),s})()}]}];let J=(()=>{const r=class{};let s=r;return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[c.Bz.forChild(q),c.Bz]}),s})();var z=g(529),B=g(5108);let I=(()=>{const r=class{};let s=r;return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[h.ez,J,i.u5,i.UX,z.JF,c.Bz,B.m]}),s})()}}]);