"use strict";(self.webpackChunkpreclinic_angular=self.webpackChunkpreclinic_angular||[]).push([[1404],{41404:(G,h,l)=>{l.r(h),l.d(h,{ScheduleModule:()=>$});var _=l(36895),d=l(30027),g=l(46382),p=l(35226),f=l.n(p),t=l(94650),v=l(57191),m=l(42466),c=l(24006),x=l(84385),Z=l(3238);function y(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",24)(1,"a",25),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.activateModifySchedule())}),t._UZ(2,"i",26),t.qZA()()}}function b(e,s){1&e&&(t.TgZ(0,"div",3)(1,"div",29)(2,"label",30),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.hij("",t.lcZ(4,1,"club_translations.schedule.closed")," "))}const u=function(){return{standalone:!0}};function A(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",3)(1,"div",29)(2,"div",31)(3,"input",32),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw().$implicit;return t.KtG(a.closed=n)}),t.qZA(),t.TgZ(4,"label",33),t._uU(5,"checkbox"),t.qZA()()(),t.TgZ(6,"div",34)(7,"label"),t._uU(8),t.ALo(9,"translate"),t.qZA()()()}if(2&e){const i=t.oxw().$implicit;t.xp6(3),t.Q6J("ngModel",i.closed)("name",i.day_id)("id",i.day_id)("ngModelOptions",t.DdM(8,u)),t.xp6(1),t.Q6J("for",i.day_id),t.xp6(4),t.Oqu(t.lcZ(9,6,"club_translations.schedule.closed"))}}function T(e,s){if(1&e&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.format_hour," ")}}function C(e,s){if(1&e&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.Q6J("value",i.id),t.xp6(1),t.hij(" ",i.format_hour," ")}}function S(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",3)(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",44)(5,"label"),t._uU(6),t.ALo(7,"translate"),t.TgZ(8,"span",45),t._uU(9,"*"),t.qZA()(),t.TgZ(10,"mat-select",46),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw(4);return t.KtG(a.opening_time=n)}),t.ALo(11,"translate"),t.YNc(12,T,2,2,"mat-option",47),t.qZA()()()()(),t.TgZ(13,"div",48)(14,"div",42)(15,"div",49)(16,"div",50)(17,"div",51)(18,"label"),t._uU(19),t.ALo(20,"translate"),t.TgZ(21,"span",45),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"mat-select",46),t.NdJ("ngModelChange",function(n){t.CHM(i);const a=t.oxw(4);return t.KtG(a.closing_time=n)}),t.ALo(24,"translate"),t.YNc(25,C,2,2,"mat-option",47),t.qZA(),t.TgZ(26,"a",52),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2).$implicit,a=t.oxw(2);return t.KtG(a.addHourSchedule(n.day_name))}),t._UZ(27,"i",53),t.qZA()()()()()()()}if(2&e){const i=t.oxw(4);t.xp6(6),t.hij("",t.lcZ(7,10,"club_translations.schedule.opens_at")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(11,12,"club_translations.schedule.hour")),t.Q6J("ngModel",i.opening_time)("ngModelOptions",t.DdM(18,u)),t.xp6(2),t.Q6J("ngForOf",i.hours),t.xp6(7),t.hij("",t.lcZ(20,14,"club_translations.schedule.closes_at")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(24,16,"club_translations.schedule.hour")),t.Q6J("ngModel",i.closing_time)("ngModelOptions",t.DdM(19,u)),t.xp6(2),t.Q6J("ngForOf",i.hours)}}function q(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Borrar "),t.qZA())}function J(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"td",56)(1,"a",52),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().index,a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.deleteHourSchedule(n,a.day_id))}),t._UZ(2,"i",57),t.qZA()()}}function U(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td",38),t._uU(2),t.qZA(),t.TgZ(3,"td",38),t._uU(4),t.qZA(),t.YNc(5,J,3,0,"td",55),t.qZA()),2&e){const i=s.$implicit,o=t.oxw(4);t.xp6(2),t.hij("",i.opening_time," h"),t.xp6(2),t.hij("",i.closing_time," h"),t.xp6(1),t.Q6J("ngIf",o.modifySchedule)}}function M(e,s){if(1&e&&(t.TgZ(0,"tr")(1,"td",58),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&e){const i=t.oxw(2).$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"club_translations.schedule.no_schedule_for")," ",i.day_name,"")}}function L(e,s){if(1&e&&(t.TgZ(0,"div",35),t.YNc(1,S,28,20,"div",14),t.TgZ(2,"div",3)(3,"div",36)(4,"table",37)(5,"thead")(6,"tr",38)(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,q,2,0,"th",39),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,U,6,3,"tr",40),t.YNc(16,M,4,4,"tr",39),t.qZA()()()()()),2&e){const i=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",o.modifySchedule),t.xp6(7),t.hij("",t.lcZ(9,6,"club_translations.schedule.opens_at")," "),t.xp6(3),t.hij("",t.lcZ(12,8,"club_translations.schedule.closes_at")," "),t.xp6(2),t.Q6J("ngIf",o.modifySchedule),t.xp6(2),t.Q6J("ngForOf",i.hours),t.xp6(1),t.Q6J("ngIf",0==i.hours.length)}}function O(e,s){if(1&e&&(t.TgZ(0,"div",3)(1,"div",27)(2,"div",3)(3,"h5",18),t._uU(4),t.qZA()(),t.YNc(5,b,5,3,"div",14),t.YNc(6,A,10,9,"div",14),t.qZA(),t.YNc(7,L,17,10,"div",28),t.TgZ(8,"div"),t._UZ(9,"hr"),t.qZA()()),2&e){const i=s.$implicit,o=t.oxw(2);t.xp6(4),t.Oqu(i.day_name),t.xp6(1),t.Q6J("ngIf",i.closed&&!o.modifySchedule),t.xp6(1),t.Q6J("ngIf",o.modifySchedule),t.xp6(1),t.Q6J("ngIf",!i.closed)}}function w(e,s){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const i=s.$implicit;t.xp6(1),t.Oqu(i)}}function Q(e,s){if(1&e&&(t.TgZ(0,"ul"),t.YNc(1,w,2,1,"li",40),t.qZA()),2&e){const i=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",i.message_errors)}}function k(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",59)(1,"div",60)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.TgZ(6,"button",61),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.cleanMessage())}),t._UZ(7,"span",62),t.qZA(),t.YNc(8,Q,2,1,"ul",39),t.qZA()()}if(2&e){const i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,3,"commun_translations.error")),t.xp6(2),t.hij(" ",i.error_message," "),t.xp6(3),t.Q6J("ngIf",i.message_errors.length>0)}}function N(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",59)(1,"div",63)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5),t.TgZ(6,"button",61),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.cleanMessage())}),t._UZ(7,"span",62),t.qZA()()()}if(2&e){const i=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,2,"commun_translations.success")),t.xp6(2),t.hij(" ",i.success_message," ")}}function F(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",64)(1,"div",65)(2,"button",66),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.saveScheduleHours())}),t._uU(3),t.ALo(4,"translate"),t.qZA()()()}2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"commun_translations.save")))}function I(e,s){if(1&e&&(t.TgZ(0,"div",3)(1,"div",15)(2,"div",16)(3,"div",17)(4,"h5",18),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.YNc(7,y,3,0,"div",19),t.qZA(),t.TgZ(8,"div",20)(9,"form"),t.YNc(10,O,10,4,"div",21),t.YNc(11,k,9,5,"div",22),t.YNc(12,N,8,4,"div",22),t.YNc(13,F,5,3,"div",23),t.qZA()()()()()),2&e){const i=t.oxw();t.xp6(5),t.Oqu(t.lcZ(6,6,"club_translations.schedule.title")),t.xp6(2),t.Q6J("ngIf",1==i.can_edit),t.xp6(3),t.Q6J("ngForOf",i.schedule_hour_days),t.xp6(1),t.Q6J("ngIf",""!=i.error_message),t.xp6(1),t.Q6J("ngIf",""!=i.success_message),t.xp6(1),t.Q6J("ngIf",1==i.can_edit)}}const Y=[{path:"",component:(()=>{const s=class{constructor(o,n){this.clubSrv=o,this.translate=n,this.routes=g._,this.modifySchedule=!0,this.hours=[],this.schedule_hour_days=[],this.error_message="",this.success_message="",this.message_errors=[],this.flag=!0,this.isLoaded=!1,this.can_edit=!1,this.translations=[]}ngOnInit(){this.initializeLanguage(),this.user=this.clubSrv.authSrv.user,this.hasPermission(),this.clubSrv.config().subscribe(o=>{this.hours=o.hours_days}),this.clubSrv.getClubSchedule().subscribe(o=>{this.isLoaded=!0,o.club_data&&(this.club=o.club_data,this.club.schedule_week_hours.length>0&&(this.modifySchedule=!1,this.schedule_hour_days=this.club.schedule_week_hours,this.schedule_hour_days.forEach(n=>{n.day_name=this.translations.commun_translations[n.day_id]})))})}initializeLanguage(){this.translate.use(this.clubSrv.authSrv.language),this.translate.setDefaultLang(this.clubSrv.authSrv.language),this.translate.get(["commun_translations","club_translations.schedule","club_translations.club_information_messages"]).subscribe(o=>{this.translations=o,this.schedule_hour_days=[{day_id:"day_1",day_name:this.translations.commun_translations.day_1,closed:!1,hours:[]},{day_id:"day_2",day_name:this.translations.commun_translations.day_2,closed:!1,hours:[]},{day_id:"day_3",day_name:this.translations.commun_translations.day_3,closed:!1,hours:[]},{day_id:"day_4",day_name:this.translations.commun_translations.day_4,closed:!1,hours:[]},{day_id:"day_5",day_name:this.translations.commun_translations.day_5,closed:!1,hours:[]},{day_id:"day_6",day_name:this.translations.commun_translations.day_6,closed:!1,hours:[]},{day_id:"day_7",day_name:this.translations.commun_translations.day_7,closed:!1,hours:[]}]})}hasPermission(o=""){return(this.user.role.includes("Super-Admin")||!!this.user.permissions.includes("edit_club"))&&(this.can_edit=!0,!0)}activateModifySchedule(){this.modifySchedule=!0}deleteHourSchedule(o,n){let a=this.schedule_hour_days.findIndex(r=>r.day_id==n);-1!=a&&this.schedule_hour_days[a].hours.splice(o,1)}cleanMessage(){this.error_message="",this.success_message="",this.message_errors=[]}addHourSchedule(o){if(this.opening_time>this.closing_time)return void f().fire({title:"Error",text:"La hora de cierre es mayor que la de apertura",icon:"warning"});let n={opening_time_id:this.opening_time,closing_time_id:this.closing_time,opening_time:this.hours[this.opening_time-2].format_hour,closing_time:this.hours[this.closing_time-2].format_hour},a=this.schedule_hour_days.findIndex(r=>r.day_name==o);-1!=a&&(this.schedule_hour_days[a].hours.push(n),this.schedule_hour_days[a].hours.sort((r,K)=>r.opening_time_id-K.opening_time_id))}saveScheduleHours(){this.cleanMessage(),this.schedule_hour_days.forEach(n=>{n.hours.forEach(a=>{if(a.opening_time_id>=a.closing_time_id)return this.error_message="Existe alguna hora de entrado mayor que hora de salida.",void(this.flag=!1)})});let o=new FormData;this.flag&&(o.append("schedule_hour",JSON.stringify(this.schedule_hour_days)),this.clubSrv.storeWeeklyScheduleClub(o).subscribe(n=>{200==n.message?this.success_message=this.translations.commun_translations.data_save_correctly:422==n.message?(this.error_message=this.translations.commun_translations.data_save_error,this.message_errors=n.errors_text):this.error_message=this.translations.commun_translations.data_save_error+" "+this.translations.commun_translations.consult_admin}))}};let e=s;return s.\u0275fac=function(n){return new(n||s)(t.Y36(v.I),t.Y36(m.sK))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-schedule"]],decls:41,vars:31,consts:[[1,"page-wrapper"],[1,"content"],[1,"page-header"],[1,"row"],[1,"col-sm-12"],[1,"breadcrumb"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],[1,"feather","icon-chevron-right"],[1,"settings-menu-links"],[1,"nav","nav-tabs","menu-tabs"],[1,"nav-item"],[1,"nav-link",3,"routerLink"],[1,"nav-item","active"],["class","row",4,"ngIf"],[1,"col-md-8"],[1,"card"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"card-title"],["class","status-toggle d-flex justify-content-between align-items-center ",4,"ngIf"],[1,"card-body","pt-0","my-4"],["class","row",4,"ngFor","ngForOf"],["class","col-md-12 my-4",4,"ngIf"],["class","form-group mb-0 text-end",4,"ngIf"],[1,"status-toggle","d-flex","justify-content-between","align-items-center"],["href","javascript:void(0);",3,"click"],[1,"icon-edit-schedule","fa-solid","fa-pen"],[1,"col-md-4"],["class","col-md-6",4,"ngIf"],[1,"col-md-3","text-end"],[1,"margin-closed"],[1,"status-toggle"],["type","checkbox",1,"check",3,"ngModel","name","id","ngModelOptions","ngModelChange"],[1,"checktoggle",3,"for"],[1,"col-md-3"],[1,"col-md-6"],[1,"table-responsive"],[1,"table","table-hover","mb-0"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-md-5"],[1,"settings-form"],[1,"form-group"],[1,"form-group","local-forms"],[1,"login-danger"],[1,"form-control","select",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-7"],[1,"form-group","links-info"],[1,"links-cont"],[1,"form-group","local-forms","form-placeholder","d-flex"],["href","javascript:void(0);",1,"btn","trash",3,"click"],[1,"fa","fa-plus","me-1"],[3,"value"],["class","settings-form text-center",4,"ngIf"],[1,"settings-form","text-center"],[1,"feather","icon-trash-2"],["colspan","3",1,"text-center"],[1,"col-md-12","my-4"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"form-group","mb-0","text-end"],[1,"settings-btns"],["type","submit",1,"border-0","btn","btn-primary","btn-gradient-primary","btn-rounded",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5)(6,"li",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"li",7),t._UZ(10,"i",8),t.qZA(),t.TgZ(11,"li",6),t._uU(12),t.ALo(13,"translate"),t.qZA()()()()(),t.TgZ(14,"div",9)(15,"ul",10)(16,"li",11)(17,"a",12),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"li",11)(21,"a",12),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"li",13)(25,"a",12),t._uU(26),t.ALo(27,"translate"),t.qZA()(),t.TgZ(28,"li",11)(29,"a",12),t._uU(30),t.ALo(31,"translate"),t.qZA()(),t.TgZ(32,"li",11)(33,"a",12),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"li",11)(37,"a",12),t._uU(38),t.ALo(39,"translate"),t.qZA()()()(),t.YNc(40,I,14,8,"div",14),t.qZA()()),2&n&&(t.xp6(7),t.Oqu(t.lcZ(8,15,"club_translations.dashboard")),t.xp6(5),t.Oqu(t.lcZ(13,17,"club_translations.club")),t.xp6(5),t.Q6J("routerLink",a.routes.club),t.xp6(1),t.Oqu(t.lcZ(19,19,"club_translations.tabs.general_data")),t.xp6(3),t.Q6J("routerLink",a.routes.description),t.xp6(1),t.Oqu(t.lcZ(23,21,"club_translations.tabs.description")),t.xp6(3),t.Q6J("routerLink",a.routes.localizationDetails),t.xp6(1),t.Oqu(t.lcZ(27,23,"club_translations.tabs.schedule")),t.xp6(3),t.Q6J("routerLink",a.routes.clubCourts),t.xp6(1),t.Oqu(t.lcZ(31,25,"club_translations.tabs.courts")),t.xp6(3),t.Q6J("routerLink",a.routes.clubServices),t.xp6(1),t.Oqu(t.lcZ(35,27,"club_translations.tabs.services")),t.xp6(3),t.Q6J("routerLink",a.routes.clubSocialLinks),t.xp6(1),t.Oqu(t.lcZ(39,29,"club_translations.tabs.social_links")),t.xp6(2),t.Q6J("ngIf",a.isLoaded))},dependencies:[_.sg,_.O5,d.rH,c._Y,c.Wl,c.JJ,c.JL,c.On,c.F,x.gD,Z.ey,m.X$],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{align-items:center;font-weight:400;vertical-align:middle}.icon-edit-schedule[_ngcontent-%COMP%]{align-items:center;height:42px;width:46px;display:flex;justify-content:center;-webkit-justify-content:center;-ms-flex-pack:center;background-color:#fff;color:#0009;position:relative;font-size:16px;margin-left:6px}.margin-closed[_ngcontent-%COMP%]{margin-left:3rem}"]}),e})()}];let j=(()=>{const s=class{};let e=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[d.Bz.forChild(Y),d.Bz]}),e})();var H=l(80529),E=l(25108);let $=(()=>{const s=class{};let e=s;return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[_.ez,j,c.u5,c.UX,H.JF,d.Bz,E.m]}),e})()}}]);